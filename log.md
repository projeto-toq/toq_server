Starting: /home/toq_admin/go/bin/dlv dap --listen=127.0.0.1:37323 --log-dest=3 from /codigos/go_code/toq_server/cmd
DAP server listening at: 127.0.0.1:37323
Type 'dlv help' for list of commands.
{"time":"2025-09-04T17:21:39.688633515Z","level":"INFO","source":{"function":"main.main","file":"/codigos/go_code/toq_server/cmd/toq_server.go","line":220},"msg":"ðŸš€ Iniciando TOQ Server Bootstrap","version":"2.0.0","component":"bootstrap","log_level":"debug","log_format":"json","log_output":"stdout"}
{"time":"2025-09-04T17:21:39.688776578Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"â–¶ï¸ Executando fase","phase":"Phase01_InitializeContext","component":"bootstrap","timestamp":"2025-09-04T17:21:39Z"}
{"time":"2025-09-04T17:21:39.688863239Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase01_InitializeContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":24},"msg":"ðŸŽ¯ FASE 1: InicializaÃ§Ã£o de Contexto e Sinais"}
{"time":"2025-09-04T17:21:39.68891294Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase01_InitializeContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":25},"msg":"Configurando contexto base do sistema"}
{"time":"2025-09-04T17:21:39.688931301Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase01_InitializeContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":28},"msg":"Configurando sinais de shutdown graceful"}
{"time":"2025-09-04T17:21:39.689781347Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).createSystemUserContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":87},"msg":"ðŸ‘¤ Contexto do usuÃ¡rio sistema criado","user_id":0}
{"time":"2025-09-04T17:21:39.690057032Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase01_InitializeContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":47},"msg":"âœ… Contexto e sinais inicializados com sucesso"}
{"time":"2025-09-04T17:21:39.690344248Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"âœ… Fase concluÃ­da","phase":"Phase01_InitializeContext","component":"bootstrap","duration":"1.562931ms"}
{"time":"2025-09-04T17:21:39.690384309Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"â–¶ï¸ Executando fase","phase":"Phase02_LoadConfiguration","component":"bootstrap","timestamp":"2025-09-04T17:21:39Z"}
{"time":"2025-09-04T17:21:39.690424539Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase02_LoadConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":19},"msg":"ðŸŽ¯ FASE 2: Carregamento e ValidaÃ§Ã£o de ConfiguraÃ§Ã£o"}
{"time":"2025-09-04T17:21:39.69045201Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase02_LoadConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":20},"msg":"Carregando configuraÃ§Ã£o do sistema"}
{"time":"2025-09-04T17:21:39.69046911Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).loadEnvironmentConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":43},"msg":"Carregando variÃ¡veis de ambiente"}
{"time":"2025-09-04T17:21:39.692134232Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).LoadEnv","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":339},"msg":"Configuration loaded successfully from YAML","path":"configs/env.yaml"}
{"time":"2025-09-04T17:21:39.692183073Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).loadEnvironmentConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":58},"msg":"âœ… VariÃ¡veis de ambiente carregadas"}
{"time":"2025-09-04T17:21:39.692206904Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":64},"msg":"Validando configuraÃ§Ã£o completa"}
{"time":"2025-09-04T17:21:39.692229564Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateDatabaseConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":140},"msg":"Validando configuraÃ§Ã£o do banco de dados"}
{"time":"2025-09-04T17:21:39.692254315Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateDatabaseConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":178},"msg":"âœ… ConfiguraÃ§Ã£o do banco de dados validada com sucesso"}
{"time":"2025-09-04T17:21:39.692275525Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateHTTPConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":184},"msg":"Validando configuraÃ§Ã£o HTTP"}
{"time":"2025-09-04T17:21:39.692325916Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateHTTPConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":245},"msg":"âœ… ConfiguraÃ§Ã£o HTTP validada com sucesso"}
{"time":"2025-09-04T17:21:39.692355716Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateTelemetryConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":252},"msg":"Validando configuraÃ§Ã£o de telemetria"}
{"time":"2025-09-04T17:21:39.692384437Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateTelemetryConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":294},"msg":"âœ… ConfiguraÃ§Ã£o de telemetria validada com sucesso"}
{"time":"2025-09-04T17:21:39.692412728Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":92},"msg":"âœ… ValidaÃ§Ã£o de configuraÃ§Ã£o concluÃ­da"}
{"time":"2025-09-04T17:21:39.692435568Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).applySecurityConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":135},"msg":"ðŸ” JWT and token TTL configuration applied"}
{"time":"2025-09-04T17:21:39.692454348Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase02_LoadConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":35},"msg":"âœ… ConfiguraÃ§Ã£o carregada e validada com sucesso","version":"2.0.0"}
{"time":"2025-09-04T17:21:39.692485319Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"âœ… Fase concluÃ­da","phase":"Phase02_LoadConfiguration","component":"bootstrap","duration":"2.101111ms"}
{"time":"2025-09-04T17:21:39.6925143Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"â–¶ï¸ Executando fase","phase":"Phase03_InitializeInfrastructure","component":"bootstrap","timestamp":"2025-09-04T17:21:39Z"}
{"time":"2025-09-04T17:21:39.69255428Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase03_InitializeInfrastructure","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":19},"msg":"ðŸŽ¯ FASE 3: InicializaÃ§Ã£o da Infraestrutura Core"}
{"time":"2025-09-04T17:21:39.692582241Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase03_InitializeInfrastructure","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":20},"msg":"Configurando infraestrutura fundamental"}
{"time":"2025-09-04T17:21:39.692597751Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeDatabase","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":48},"msg":"Inicializando conexÃ£o com banco de dados"}
{"time":"2025-09-04T17:21:39.690183635Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startPprofServer.func1","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":106},"msg":"ðŸ” Iniciando servidor pprof na porta 6060"}
{"time":"2025-09-04T17:21:39.693412227Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startPprofServer.func1","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":118},"msg":"âœ… Servidor pprof iniciado em localhost:6060"}
{"time":"2025-09-04T17:21:39.694990907Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeDatabase","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":440},"msg":"Database connection initialized","uri":"toq_user:toq_password@tcp(localhost:3306)/toq_db?parseTime=true&loc=UTC&timeout=30s&readTimeout=30s&writeTimeout=30s"}
{"time":"2025-09-04T17:21:39.695464146Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeDatabase","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":64},"msg":"âœ… ConexÃ£o com banco de dados estabelecida"}
{"time":"2025-09-04T17:21:39.695493827Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeCache","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":70},"msg":"Inicializando sistema de cache Redis"}
{"time":"2025-09-04T17:21:39.695508877Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeCache","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":78},"msg":"Conectando ao Redis","url":"redis://localhost:6379/0"}
{"time":"2025-09-04T17:21:39.69770611Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.NewRedisCache","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":63},"msg":"Redis cache connected successfully","url":"redis://localhost:6379/0"}
{"time":"2025-09-04T17:21:39.697800162Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeCache","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":87},"msg":"âœ… Sistema de cache Redis inicializado com sucesso"}
{"time":"2025-09-04T17:21:39.697823892Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeTelemetry","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":93},"msg":"Inicializando sistema de telemetria OpenTelemetry"}
{"time":"2025-09-04T17:21:39.698109368Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*TelemetryManager).initializeTracing","file":"/codigos/go_code/toq_server/internal/core/config/telemetry.go","line":123},"msg":"OpenTelemetry tracing initialized","endpoint":"localhost:4318"}
{"time":"2025-09-04T17:21:39.698430114Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*TelemetryManager).initializeMetrics","file":"/codigos/go_code/toq_server/internal/core/config/telemetry.go","line":170},"msg":"OpenTelemetry metrics initialized","endpoint":"localhost:4318"}
{"time":"2025-09-04T17:21:39.698478025Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*TelemetryManager).Initialize","file":"/codigos/go_code/toq_server/internal/core/config/telemetry.go","line":63},"msg":"OpenTelemetry initialized successfully","tracing_enabled":true,"metrics_enabled":true,"endpoint":"localhost:4318"}
{"time":"2025-09-04T17:21:39.698504615Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeTelemetry","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":474},"msg":"OpenTelemetry initialized successfully"}
{"time":"2025-09-04T17:21:39.698527446Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeTelemetry","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":107},"msg":"âœ… OpenTelemetry inicializado (tracing + metrics)"}
{"time":"2025-09-04T17:21:39.698548336Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeMetrics","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":113},"msg":"Inicializando adapter de mÃ©tricas Prometheus"}
{"time":"2025-09-04T17:21:39.698580407Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateMetricsAdapter","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":61},"msg":"Creating metrics adapter"}
{"time":"2025-09-04T17:21:39.698855922Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeMetrics","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":138},"msg":"âœ… Adapter de mÃ©tricas Prometheus inicializado"}
{"time":"2025-09-04T17:21:39.698900733Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase03_InitializeInfrastructure","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":42},"msg":"âœ… Infraestrutura core inicializada com sucesso"}
{"time":"2025-09-04T17:21:39.698933614Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"âœ… Fase concluÃ­da","phase":"Phase03_InitializeInfrastructure","component":"bootstrap","duration":"6.417874ms"}
{"time":"2025-09-04T17:21:39.698965364Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"â–¶ï¸ Executando fase","phase":"Phase04_InjectDependencies","component":"bootstrap","timestamp":"2025-09-04T17:21:39Z"}
{"time":"2025-09-04T17:21:39.699532045Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase04_InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":11},"msg":"ðŸŽ¯ FASE 4: InjeÃ§Ã£o de DependÃªncias via Factory Pattern"}
{"time":"2025-09-04T17:21:39.699615657Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase04_InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":12},"msg":"Configurando injeÃ§Ã£o de dependÃªncias"}
{"time":"2025-09-04T17:21:39.699642457Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeLifecycleManager","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":30},"msg":"Inicializando lifecycle manager"}
{"time":"2025-09-04T17:21:39.699684318Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeLifecycleManager","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":35},"msg":"âœ… Lifecycle manager inicializado"}
{"time":"2025-09-04T17:21:39.699708748Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":20},"msg":"Starting dependency injection using Factory Pattern"}
{"time":"2025-09-04T17:21:39.699728089Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":21},"msg":"InjectDependencies method called on config instance"}
{"time":"2025-09-04T17:21:39.699748919Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.ValidateFactoryConfig","file":"/codigos/go_code/toq_server/internal/core/factory/validation.go","line":13},"msg":"Validating factory configuration"}
{"time":"2025-09-04T17:21:39.6997695Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.ValidateFactoryConfig","file":"/codigos/go_code/toq_server/internal/core/factory/validation.go","line":28},"msg":"Factory configuration validation successful"}
{"time":"2025-09-04T17:21:39.69978884Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateStorageAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":144},"msg":"Creating storage adapters"}
{"time":"2025-09-04T17:21:39.703741666Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.NewRedisCache","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":63},"msg":"Redis cache connected successfully","url":"redis://localhost:6379/0"}
{"time":"2025-09-04T17:21:39.703838238Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateStorageAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":163},"msg":"Successfully created all storage adapters"}
{"time":"2025-09-04T17:21:39.703872739Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).createActivityTracker","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":231},"msg":"âœ… ActivityTracker criado com sucesso com Redis client"}
{"time":"2025-09-04T17:21:39.703900329Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateRepositoryAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":175},"msg":"Creating repository adapters"}
{"time":"2025-09-04T17:21:39.70396587Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateRepositoryAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":198},"msg":"Successfully created all repository adapters"}
{"time":"2025-09-04T17:21:39.703990011Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).assignRepositoryAdapters","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":145},"msg":"Assigning repository adapters"}
{"time":"2025-09-04T17:21:39.704008241Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).assignRepositoryAdapters","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":181},"msg":"Repository adapters assigned successfully"}
{"time":"2025-09-04T17:21:39.704025662Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateValidationAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":73},"msg":"Creating validation adapters"}
{"time":"2025-09-04T17:21:39.704058742Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateValidationAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":93},"msg":"Successfully created all validation adapters"}
{"time":"2025-09-04T17:21:39.704086653Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":84},"msg":"Creating external service adapters"}
{"time":"2025-09-04T17:21:39.704105453Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateExternalServiceAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":105},"msg":"Creating external service adapters"}
{"time":"2025-09-04T17:21:39.705546371Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.NewS3Adapter","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/s3_adapter.go","line":24},"msg":"Creating S3 adapter","region":"us-east-1","bucket":"toq-app-media"}
{"time":"2025-09-04T17:21:39.706096991Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.NewS3Adapter","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/s3_adapter.go","line":76},"msg":"S3 adapter created successfully","bucket":"toq-app-media","region":"us-east-1"}
{"time":"2025-09-04T17:21:39.706150362Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateExternalServiceAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":130},"msg":"Successfully created all external service adapters"}
{"time":"2025-09-04T17:21:39.706178883Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).initializeServices","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":201},"msg":"Initializing all services"}
{"time":"2025-09-04T17:21:39.706199623Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":108},"msg":"Initializing Global Service"}
{"time":"2025-09-04T17:21:39.706223184Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).SetGlobalService","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":77},"msg":"GlobalService injected into RedisCache"}
{"time":"2025-09-04T17:21:39.706244994Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":164},"msg":"GlobalService injected into Redis cache"}
{"time":"2025-09-04T17:21:39.706269985Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitPermissionHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":208},"msg":"Initializing Permission Handler"}
{"time":"2025-09-04T17:21:39.706302015Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitComplexHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":189},"msg":"Initializing Complex Handler"}
{"time":"2025-09-04T17:21:39.706325706Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitListingHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":197},"msg":"Initializing Listing Handler"}
{"time":"2025-09-04T17:21:39.706352656Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitUserHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":174},"msg":"Initializing User Handler"}
{"time":"2025-09-04T17:21:39.706372307Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).initializeServices","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":210},"msg":"All services initialized successfully"}
{"time":"2025-09-04T17:21:39.706395827Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeTempBlockCleaner","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":310},"msg":"âœ… TempBlockCleanerWorker initialized"}
{"time":"2025-09-04T17:21:39.706415588Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":102},"msg":"Dependency injection completed successfully using Factory Pattern"}
{"time":"2025-09-04T17:21:39.706437498Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase04_InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":24},"msg":"âœ… InjeÃ§Ã£o de dependÃªncias concluÃ­da via Factory Pattern"}
{"time":"2025-09-04T17:21:39.706517459Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"âœ… Fase concluÃ­da","phase":"Phase04_InjectDependencies","component":"bootstrap","duration":"7.548175ms"}
{"time":"2025-09-04T17:21:39.706597811Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"â–¶ï¸ Executando fase","phase":"Phase05_InitializeServices","component":"bootstrap","timestamp":"2025-09-04T17:21:39Z"}
{"time":"2025-09-04T17:21:39.706659162Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":16},"msg":"ðŸŽ¯ FASE 5: InicializaÃ§Ã£o de ServiÃ§os"}
{"time":"2025-09-04T17:21:39.706701123Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":17},"msg":"Inicializando serviÃ§os na ordem correta"}
{"time":"2025-09-04T17:21:39.706723453Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando serviÃ§o","service":"GlobalService"}
{"time":"2025-09-04T17:21:39.706744054Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":45},"msg":"Inicializando Global Service"}
{"time":"2025-09-04T17:21:39.706759854Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":108},"msg":"Initializing Global Service"}
{"time":"2025-09-04T17:21:39.706779125Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).SetGlobalService","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":77},"msg":"GlobalService injected into RedisCache"}
{"time":"2025-09-04T17:21:39.706798755Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":164},"msg":"GlobalService injected into Redis cache"}
{"time":"2025-09-04T17:21:39.706820935Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":53},"msg":"âœ… Global Service inicializado"}
{"time":"2025-09-04T17:21:39.706839686Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"âœ… ServiÃ§o inicializado","service":"GlobalService"}
{"time":"2025-09-04T17:21:39.706859956Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando serviÃ§o","service":"PermissionService"}
{"time":"2025-09-04T17:21:39.706879186Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializePermissionService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":59},"msg":"Inicializando Permission Service"}
{"time":"2025-09-04T17:21:39.706898887Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitPermissionHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":208},"msg":"Initializing Permission Handler"}
{"time":"2025-09-04T17:21:39.706915437Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializePermissionService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":64},"msg":"âœ… Permission Service inicializado"}
{"time":"2025-09-04T17:21:39.706933457Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"âœ… ServiÃ§o inicializado","service":"PermissionService"}
{"time":"2025-09-04T17:21:39.706960308Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando serviÃ§o","service":"UserService"}
{"time":"2025-09-04T17:21:39.706979508Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":70},"msg":"Inicializando User Service"}
{"time":"2025-09-04T17:21:39.706997649Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitUserHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":174},"msg":"Initializing User Handler"}
{"time":"2025-09-04T17:21:39.707019019Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":75},"msg":"âœ… User Service inicializado"}
{"time":"2025-09-04T17:21:39.7070725Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"âœ… ServiÃ§o inicializado","service":"UserService"}
{"time":"2025-09-04T17:21:39.707094711Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando serviÃ§o","service":"ComplexService"}
{"time":"2025-09-04T17:21:39.707113071Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeComplexService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":81},"msg":"Inicializando Complex Service"}
{"time":"2025-09-04T17:21:39.707132311Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitComplexHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":189},"msg":"Initializing Complex Handler"}
{"time":"2025-09-04T17:21:39.707151072Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeComplexService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":86},"msg":"âœ… Complex Service inicializado"}
{"time":"2025-09-04T17:21:39.707169982Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"âœ… ServiÃ§o inicializado","service":"ComplexService"}
{"time":"2025-09-04T17:21:39.707190012Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando serviÃ§o","service":"ListingService"}
{"time":"2025-09-04T17:21:39.707209423Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeListingService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":92},"msg":"Inicializando Listing Service"}
{"time":"2025-09-04T17:21:39.707226913Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitListingHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":197},"msg":"Initializing Listing Handler"}
{"time":"2025-09-04T17:21:39.707247174Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeListingService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":97},"msg":"âœ… Listing Service inicializado"}
{"time":"2025-09-04T17:21:39.707267314Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"âœ… ServiÃ§o inicializado","service":"ListingService"}
{"time":"2025-09-04T17:21:39.707291634Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":39},"msg":"âœ… Todos os serviÃ§os inicializados com sucesso"}
{"time":"2025-09-04T17:21:39.707328465Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"âœ… Fase concluÃ­da","phase":"Phase05_InitializeServices","component":"bootstrap","duration":"730.714Âµs"}
{"time":"2025-09-04T17:21:39.707386196Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"â–¶ï¸ Executando fase","phase":"Phase06_ConfigureHandlers","component":"bootstrap","timestamp":"2025-09-04T17:21:39Z"}
{"time":"2025-09-04T17:21:39.707424757Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase06_ConfigureHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":10},"msg":"ðŸŽ¯ FASE 6: ConfiguraÃ§Ã£o de Handlers e Rotas"}
{"time":"2025-09-04T17:21:39.707453627Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase06_ConfigureHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":11},"msg":"Configurando handlers HTTP e sistema de rotas"}
{"time":"2025-09-04T17:21:39.707469588Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":39},"msg":"Inicializando servidor HTTP com middleware"}
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

{"time":"2025-09-04T17:21:39.707508409Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).SetupHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":499},"msg":"HTTP server initialized","port":":8080","read_timeout":"30s","write_timeout":"30s"}
{"time":"2025-09-04T17:21:39.707534279Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeHTTP","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":484},"msg":"HTTP server initialization completed"}
{"time":"2025-09-04T17:21:39.707554039Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":49},"msg":"âœ… Servidor HTTP configurado com TLS e middleware"}
{"time":"2025-09-04T17:21:39.70757363Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).createHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":55},"msg":"Criando handlers HTTP via Factory Pattern"}
{"time":"2025-09-04T17:21:39.70759247Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).createHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":59},"msg":"âœ… Handlers HTTP preparados para criaÃ§Ã£o"}
{"time":"2025-09-04T17:21:39.70760942Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).setupRoutesAndMiddleware","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":65},"msg":"Configurando rotas e middlewares"}
{"time":"2025-09-04T17:21:39.707625921Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).createHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":541},"msg":"Creating HTTP handlers via factory pattern"}
{"time":"2025-09-04T17:21:39.707645661Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":220},"msg":"Creating HTTP handlers"}
{"time":"2025-09-04T17:21:39.707669912Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":245},"msg":"Successfully created all HTTP handlers"}
{"time":"2025-09-04T17:21:39.707684962Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).createHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":557},"msg":"âœ… HTTP handlers created successfully via factory"}
[GIN-debug] GET    /swagger/*any             --> github.com/swaggo/gin-swagger.CustomWrapHandler.func1 (8 handlers)
[GIN-debug] POST   /api/v2/auth/owner        --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/auth_handlers.(*AuthHandler).CreateOwner-fm (8 handlers)
[GIN-debug] POST   /api/v2/auth/realtor      --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/auth_handlers.(*AuthHandler).CreateRealtor-fm (8 handlers)
[GIN-debug] POST   /api/v2/auth/agency       --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/auth_handlers.(*AuthHandler).CreateAgency-fm (8 handlers)
[GIN-debug] POST   /api/v2/auth/signin       --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/auth_handlers.(*AuthHandler).SignIn-fm (8 handlers)
[GIN-debug] POST   /api/v2/auth/refresh      --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/auth_handlers.(*AuthHandler).RefreshToken-fm (8 handlers)
[GIN-debug] POST   /api/v2/auth/password/request --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/auth_handlers.(*AuthHandler).RequestPasswordChange-fm (8 handlers)
[GIN-debug] POST   /api/v2/auth/password/confirm --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/auth_handlers.(*AuthHandler).ConfirmPasswordChange-fm (8 handlers)
[GIN-debug] GET    /api/v2/user/profile      --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).GetProfile-fm (10 handlers)
[GIN-debug] PUT    /api/v2/user/profile      --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).UpdateProfile-fm (10 handlers)
[GIN-debug] DELETE /api/v2/user/account      --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).DeleteAccount-fm (10 handlers)
[GIN-debug] GET    /api/v2/user/onboarding   --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func1 (10 handlers)
[GIN-debug] GET    /api/v2/user/roles        --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func2 (10 handlers)
[GIN-debug] GET    /api/v2/user/home         --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func3 (10 handlers)
[GIN-debug] PUT    /api/v2/user/opt-status   --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).UpdateOptStatus-fm (10 handlers)
[GIN-debug] POST   /api/v2/user/signout      --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).SignOut-fm (10 handlers)
[GIN-debug] POST   /api/v2/user/photo/upload-url --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).GetPhotoUploadURL-fm (10 handlers)
[GIN-debug] GET    /api/v2/user/profile/thumbnails --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).GetProfileThumbnails-fm (10 handlers)
[GIN-debug] POST   /api/v2/user/email/request --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).RequestEmailChange-fm (10 handlers)
[GIN-debug] POST   /api/v2/user/email/confirm --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).ConfirmEmailChange-fm (10 handlers)
[GIN-debug] POST   /api/v2/user/email/resend --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).ResendEmailChangeCode-fm (10 handlers)
[GIN-debug] POST   /api/v2/user/phone/request --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).RequestPhoneChange-fm (10 handlers)
[GIN-debug] POST   /api/v2/user/phone/confirm --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).ConfirmPhoneChange-fm (10 handlers)
[GIN-debug] POST   /api/v2/user/phone/resend --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).ResendPhoneChangeCode-fm (10 handlers)
[GIN-debug] POST   /api/v2/user/role/alternative --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func4 (10 handlers)
[GIN-debug] POST   /api/v2/user/role/switch  --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func5 (10 handlers)
[GIN-debug] POST   /api/v2/agency/invite-realtor --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func6 (10 handlers)
[GIN-debug] GET    /api/v2/agency/realtors   --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func7 (10 handlers)
[GIN-debug] GET    /api/v2/agency/realtors/:id --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func8 (10 handlers)
[GIN-debug] DELETE /api/v2/agency/realtors/:id --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func9 (10 handlers)
[GIN-debug] POST   /api/v2/realtor/creci/verify --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).VerifyCreciDocuments-fm (10 handlers)
[GIN-debug] POST   /api/v2/realtor/creci/upload-url --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/user_handlers.(*UserHandler).GetCreciUploadURL-fm (10 handlers)
[GIN-debug] POST   /api/v2/realtor/invitation/accept --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func10 (10 handlers)
[GIN-debug] POST   /api/v2/realtor/invitation/reject --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func11 (10 handlers)
[GIN-debug] GET    /api/v2/realtor/agency    --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func12 (10 handlers)
[GIN-debug] DELETE /api/v2/realtor/agency    --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterUserRoutes.func13 (10 handlers)
[GIN-debug] GET    /api/v2/listings          --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func1 (10 handlers)
[GIN-debug] POST   /api/v2/listings          --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func2 (10 handlers)
[GIN-debug] GET    /api/v2/listings/search   --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func3 (10 handlers)
[GIN-debug] GET    /api/v2/listings/options  --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func4 (10 handlers)
[GIN-debug] GET    /api/v2/listings/features/base --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func5 (10 handlers)
[GIN-debug] GET    /api/v2/listings/favorites --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func6 (10 handlers)
[GIN-debug] GET    /api/v2/listings/:id      --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func7 (10 handlers)
[GIN-debug] PUT    /api/v2/listings/:id      --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func8 (10 handlers)
[GIN-debug] DELETE /api/v2/listings/:id      --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func9 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/end-update --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func10 (10 handlers)
[GIN-debug] GET    /api/v2/listings/:id/status --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func11 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/approve --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func12 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/reject --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func13 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/suspend --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func14 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/release --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func15 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/copy --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func16 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/share --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func17 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/favorite --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func18 (10 handlers)
[GIN-debug] DELETE /api/v2/listings/:id/favorite --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func19 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/visit/request --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func20 (10 handlers)
[GIN-debug] GET    /api/v2/listings/:id/visits --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func21 (10 handlers)
[GIN-debug] POST   /api/v2/listings/:id/offers --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func22 (10 handlers)
[GIN-debug] GET    /api/v2/listings/:id/offers --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func23 (10 handlers)
[GIN-debug] GET    /api/v2/visits            --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func24 (10 handlers)
[GIN-debug] DELETE /api/v2/visits/:id        --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func25 (10 handlers)
[GIN-debug] POST   /api/v2/visits/:id/confirm --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func26 (10 handlers)
[GIN-debug] POST   /api/v2/visits/:id/approve --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func27 (10 handlers)
[GIN-debug] POST   /api/v2/visits/:id/reject --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func28 (10 handlers)
[GIN-debug] GET    /api/v2/offers            --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func29 (10 handlers)
[GIN-debug] PUT    /api/v2/offers/:id        --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func30 (10 handlers)
[GIN-debug] DELETE /api/v2/offers/:id        --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func31 (10 handlers)
[GIN-debug] POST   /api/v2/offers/:id/send   --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func32 (10 handlers)
[GIN-debug] POST   /api/v2/offers/:id/approve --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func33 (10 handlers)
[GIN-debug] POST   /api/v2/offers/:id/reject --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func34 (10 handlers)
[GIN-debug] POST   /api/v2/realtors/:id/evaluate --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func35 (10 handlers)
[GIN-debug] POST   /api/v2/owners/:id/evaluate --> github.com/giulio-alfieri/toq_server/internal/adapter/left/http/routes.RegisterListingRoutes.func36 (10 handlers)
[GIN-debug] GET    /healthz                  --> github.com/giulio-alfieri/toq_server/internal/core/config.(*config).setupBasicRoutes.func2 (9 handlers)
[GIN-debug] GET    /readyz                   --> github.com/giulio-alfieri/toq_server/internal/core/config.(*config).setupBasicRoutes.func3 (9 handlers)
[GIN-debug] GET    /metrics                  --> go:interface { GetMetrics(*github.com/gin-gonic/gin.Context) }.GetMetrics-fm (8 handlers)
[GIN-debug] GET    /api/v2/ping              --> github.com/giulio-alfieri/toq_server/internal/core/config.(*config).setupBasicRoutes.func4 (8 handlers)
{"time":"2025-09-04T17:21:39.709241932Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).SetupHTTPHandlersAndRoutes","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":536},"msg":"HTTP handlers and routes configured successfully"}
{"time":"2025-09-04T17:21:39.709269632Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).setupRoutesAndMiddleware","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":70},"msg":"âœ… Rotas e middlewares configurados"}
{"time":"2025-09-04T17:21:39.709307863Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).setupHealthChecks","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":76},"msg":"Configurando health checks (liveness/readiness)"}
{"time":"2025-09-04T17:21:39.709328254Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).setupHealthChecks","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":81},"msg":"âœ… Health checks configurados"}
{"time":"2025-09-04T17:21:39.709345354Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase06_ConfigureHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":33},"msg":"âœ… Handlers e rotas configurados com sucesso"}
{"time":"2025-09-04T17:21:39.709414915Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"âœ… Fase concluÃ­da","phase":"Phase06_ConfigureHandlers","component":"bootstrap","duration":"2.053749ms"}
{"time":"2025-09-04T17:21:39.709446286Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"â–¶ï¸ Executando fase","phase":"Phase07_StartBackgroundWorkers","component":"bootstrap","timestamp":"2025-09-04T17:21:39Z"}
{"time":"2025-09-04T17:21:39.709525147Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase07_StartBackgroundWorkers","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":12},"msg":"ðŸŽ¯ FASE 7: InicializaÃ§Ã£o de Background Workers"}
{"time":"2025-09-04T17:21:39.709564338Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase07_StartBackgroundWorkers","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":13},"msg":"Configurando workers em background"}
{"time":"2025-09-04T17:21:39.709581558Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeSystemGoroutines","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":36},"msg":"Inicializando goroutines do sistema"}
{"time":"2025-09-04T17:21:39.709633599Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeGoRoutines","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":238},"msg":"Activity tracker batch worker started"}
{"time":"2025-09-04T17:21:39.70967741Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeGoRoutines","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":250},"msg":"Temp block cleaner worker started"}
{"time":"2025-09-04T17:21:39.709704181Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeGoRoutines","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":264},"msg":"Session cleaner worker started","interval_seconds":300}
{"time":"2025-09-04T17:21:39.709728891Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeGoRoutines","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":281},"msg":"Validation cleaner worker started","interval_seconds":300}
{"time":"2025-09-04T17:21:39.709749452Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeSystemGoroutines","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":41},"msg":"âœ… Background workers inicializados"}
{"time":"2025-09-04T17:21:39.709766312Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).linkActivityTrackerToUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":47},"msg":"Verificando e conectando activity tracker ao user service"}
{"time":"2025-09-04T17:21:39.709752402Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).StartBatchWorker","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":55},"msg":"Activity batch worker started","interval":30000000000}
{"time":"2025-09-04T17:21:39.709784912Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).SetActivityTrackerUserService","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":291},"msg":"Activity tracker connected to user service"}
{"time":"2025-09-04T17:21:39.709801573Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).linkActivityTrackerToUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":57},"msg":"âœ… Activity tracker conectado ao user service"}
{"time":"2025-09-04T17:21:39.709806243Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*TempBlockCleanerWorker).Start","file":"/codigos/go_code/toq_server/internal/core/go_routines/temp_block_cleaner_worker.go","line":34},"msg":"TempBlockCleanerWorker started"}
{"time":"2025-09-04T17:21:39.709836253Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*TempBlockCleanerWorker).processExpiredBlocks","file":"/codigos/go_code/toq_server/internal/core/go_routines/temp_block_cleaner_worker.go","line":68},"msg":"Processing expired temporary blocks"}
{"time":"2025-09-04T17:21:39.709838483Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.ValidationCleaner","file":"/codigos/go_code/toq_server/internal/core/go_routines/validation_cleaner_worker.go","line":13},"msg":"validation cleaner worker started","interval":300000000000}
{"time":"2025-09-04T17:21:39.710904144Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.SessionCleaner","file":"/codigos/go_code/toq_server/internal/core/go_routines/session_cleaner_worker.go","line":14},"msg":"session cleaner routine started"}
{"time":"2025-09-04T17:21:39.709819143Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).verifyDatabaseSchema","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":63},"msg":"Verificando schema do banco de dados"}
{"time":"2025-09-04T17:21:39.713649747Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/permission.(*PermissionAdapter).GetExpiredTempBlockedUsers","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/permission/user_blocking.go","line":103},"msg":"Found expired temp blocked users","count":0}
{"time":"2025-09-04T17:21:39.714025264Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).VerifyDatabase","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":456},"msg":"Database connection verified successfully"}
{"time":"2025-09-04T17:21:39.714058215Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).verifyDatabaseSchema","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":68},"msg":"âœ… Schema do banco de dados verificado"}
{"time":"2025-09-04T17:21:39.714080215Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase07_StartBackgroundWorkers","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":30},"msg":"âœ… Background workers inicializados com sucesso"}
{"time":"2025-09-04T17:21:39.714110106Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"âœ… Fase concluÃ­da","phase":"Phase07_StartBackgroundWorkers","component":"bootstrap","duration":"4.662159ms"}
{"time":"2025-09-04T17:21:39.714139336Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"â–¶ï¸ Executando fase","phase":"Phase08_StartServer","component":"bootstrap","timestamp":"2025-09-04T17:21:39Z"}
{"time":"2025-09-04T17:21:39.714178057Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase08_StartServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":18},"msg":"ðŸŽ¯ FASE 8: InicializaÃ§Ã£o Final e Runtime"}
{"time":"2025-09-04T17:21:39.714214558Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase08_StartServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":19},"msg":"Preparando servidor para aceitar conexÃµes"}
{"time":"2025-09-04T17:21:39.714234388Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).markServerReady","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":42},"msg":"Marcando servidor como pronto para trÃ¡fego"}
{"time":"2025-09-04T17:21:39.714251428Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).markServerReady","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":47},"msg":"âœ… Servidor marcado como ready para receber trÃ¡fego"}
{"time":"2025-09-04T17:21:39.714268449Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":53},"msg":"Iniciando servidor HTTP"}
{"time":"2025-09-04T17:21:39.714299819Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHTTPServer.func1","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":71},"msg":"ðŸš€ Iniciando servidor HTTP na porta configurada"}
{"time":"2025-09-04T17:21:39.716116674Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*TempBlockCleanerWorker).processExpiredBlocks","file":"/codigos/go_code/toq_server/internal/core/go_routines/temp_block_cleaner_worker.go","line":77},"msg":"No expired temporary blocks found"}
{"time":"2025-09-04T17:21:39.815075291Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":96},"msg":"âœ… Servidor HTTP iniciado com sucesso"}
{"time":"2025-09-04T17:21:39.815173583Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHealthMonitoring","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":102},"msg":"Iniciando monitoramento de saÃºde em runtime"}
{"time":"2025-09-04T17:21:39.815421277Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHealthMonitoring","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":127},"msg":"âœ… Monitoramento de saÃºde em runtime iniciado"}
{"time":"2025-09-04T17:21:39.815447188Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase08_StartServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":34},"msg":"ðŸŒŸ TOQ Server pronto para servir","uptime":126680601}
{"time":"2025-09-04T17:21:39.815534249Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"âœ… Fase concluÃ­da","phase":"Phase08_StartServer","component":"bootstrap","duration":"101.392733ms"}
{"time":"2025-09-04T17:21:39.8155638Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Bootstrap","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":137},"msg":"ðŸŽ‰ TOQ Server inicializado com sucesso","component":"bootstrap","total_time":"126.797063ms"}
{"time":"2025-09-04T17:21:54.822496141Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"6c94dc59-c936-4976-b9ab-947b1c02eaf9","path":"/api/v2/auth/owner"}
{"time":"2025-09-04T17:21:54.823886408Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/auth_handlers.(*AuthHandler).CreateOwner","file":"/codigos/go_code/toq_server/internal/adapter/left/http/handlers/auth_handlers/create_owner.go","line":64},"msg":"auth.create_owner.debug","device_token":"fcm device token","ip":"179.110.194.42","user_agent":"PostmanRuntime/7.45.0","header_device_id":"","ctx_device_id":""}
{"time":"2025-09-04T17:21:54.827522278Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cpf.(*CPFAdapter).GetCpf","file":"/codigos/go_code/toq_server/internal/adapter/right/cpf/cpf_validation_adapter.go","line":32},"msg":"Making request to CPF API","url":"https://ws.hubdodesenvolvedor.com.br/v2/cpf/?cpf=04679654805&data=14/06/1963&token=164634160QpAPJYxHbS297241984","cpf":"04679654805","bornAt":"14/06/1963"}
{"time":"2025-09-04T17:21:55.023979759Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cep.(*CEPAdapter).GetCep","file":"/codigos/go_code/toq_server/internal/adapter/right/cep/cep_validation_adapter.go","line":30},"msg":"Making request to CEP API","url":"https://ws.hubdodesenvolvedor.com.br/v2/cep/?cep=06540400&token=164634160QpAPJYxHbS297241984","cep":"06540400"}
{"time":"2025-09-04T17:21:55.226628198Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).AssignRoleToUserWithTx","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/assign_role_to_user.go","line":60},"msg":"permission.role.assign.request","user_id":2,"role_id":3,"expires_at":null}
{"time":"2025-09-04T17:21:55.231147345Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).AssignRoleToUserWithTx","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/assign_role_to_user.go","line":96},"msg":"permission.role.assigned","user_id":2,"role_id":3,"role_name":"ProprietÃ¡rio"}
{"time":"2025-09-04T17:21:55.233580792Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.(*S3Adapter).CreateUserFolder","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/create_user_folder.go","line":19},"msg":"Creating user folder structure in S3","userID":2,"bucket":"toq-app-media"}
{"time":"2025-09-04T17:21:55.317837134Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.(*S3Adapter).CreateUserFolder","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/create_user_folder.go","line":40},"msg":"placeholder created in S3","userID":2,"path":"2/.placeholder"}
{"time":"2025-09-04T17:21:55.339808766Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.(*S3Adapter).CreateUserFolder","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/create_user_folder.go","line":40},"msg":"placeholder created in S3","userID":2,"path":"2/thumbnails/.placeholder"}
{"time":"2025-09-04T17:21:55.339924069Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.(*S3Adapter).CreateUserFolder","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/create_user_folder.go","line":43},"msg":"user folder structure created successfully in S3","userID":2,"bucket":"toq-app-media"}
{"time":"2025-09-04T17:21:55.349698447Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).SignInWithContext","file":"/codigos/go_code/toq_server/internal/core/service/user_service/signin.go","line":41},"msg":"auth.signin_with_context.debug","national_id":"04679654805","has_device_token":true,"ip":"179.110.194.42","user_agent":"PostmanRuntime/7.45.0","ctx_device_id":""}
{"time":"2025-09-04T17:21:55.49275122Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).signIn","file":"/codigos/go_code/toq_server/internal/core/service/user_service/signin.go","line":166},"msg":"auth.signin.device_token.add_user_only","user_id":2}
{"time":"2025-09-04T17:21:55.498185914Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*securityEventLogger).LogSecurityEvent","file":"/codigos/go_code/toq_server/internal/core/service/user_service/security_logger.go","line":59},"msg":"Security event logged","eventType":"signin_success","result":"success","timestamp":"2025-09-04T17:21:55.498169124Z","userID":2,"nationalID":"04679654805","ipAddress":"179.110.194.42","userAgent":"PostmanRuntime/7.45.0"}
{"time":"2025-09-04T17:21:55.498294326Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).signIn","file":"/codigos/go_code/toq_server/internal/core/service/user_service/signin.go","line":181},"msg":"User signed in successfully","userID":2}
{"time":"2025-09-04T17:21:55.498354427Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*globalService).StartSessionEventSubscriber.func2","file":"/codigos/go_code/toq_server/internal/core/service/global_service/session_notification_subscriber.go","line":32},"msg":"session.event.received","type":"session.created","user_id":2,"session_id":1,"device_id":""}
{"time":"2025-09-04T17:21:55.50575126Z","level":"INFO","msg":"HTTP Request","request_id":"6c94dc59-c936-4976-b9ab-947b1c02eaf9","method":"POST","path":"/api/v2/auth/owner","status":201,"duration":683132456,"size":640,"client_ip":"179.110.194.42","user_agent":"PostmanRuntime/7.45.0","trace_id":"62eee7f452bb28c5a49ab83141fa43a3","span_id":"d3a8b46e69a6f99a"}
{"time":"2025-09-04T17:22:09.71126584Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":78},"msg":"No active users to process"}
{"time":"2025-09-04T17:22:12.932937964Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"ec859be5-23bb-4fc2-b834-254b46b09367","path":"/api/v2/user/email/resend"}
{"time":"2025-09-04T17:22:12.933698648Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasHTTPPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_http_permission.go","line":26},"msg":"permission.http.check.start","user_id":2,"method":"POST","path":"/api/v2/user/email/resend"}
{"time":"2025-09-04T17:22:12.936339749Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":46},"msg":"permission.check.start","user_id":2,"resource":"http","action":"POST:/api/v2/user/email/resend"}
{"time":"2025-09-04T17:22:12.936950241Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsFromCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":135},"msg":"Cache miss for user permissions","userID":2,"error":"cache miss - user permissions not found for user 2"}
{"time":"2025-09-04T17:22:12.937011452Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":94},"msg":"Cache miss for user permissions","userID":2,"error":"cache miss - cache miss - user permissions not found for user 2"}
{"time":"2025-09-04T17:22:12.941704972Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).SetUserPermissions","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":331},"msg":"User permissions cached","userID":2,"ttl":900000000000,"dataSize":3827}
{"time":"2025-09-04T17:22:12.941768274Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).setUserPermissionsInCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":219},"msg":"User permissions cached successfully","userID":2,"count":25,"dataSize":3827}
{"time":"2025-09-04T17:22:12.941795894Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":112},"msg":"Permissions loaded from database","userID":2,"count":25}
{"time":"2025-09-04T17:22:12.941821555Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":73},"msg":"permission.check.allowed","user_id":2,"resource":"http","action":"POST:/api/v2/user/email/resend","permission_id":40}
{"time":"2025-09-04T17:22:12.941866295Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.PermissionMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/permission_middleware.go","line":71},"msg":"Permission granted","userID":2,"method":"POST","path":"/api/v2/user/email/resend"}
{"time":"2025-09-04T17:22:12.947776209Z","level":"INFO","msg":"HTTP Request","request_id":"ec859be5-23bb-4fc2-b834-254b46b09367","method":"POST","path":"/api/v2/user/email/resend","status":200,"duration":14752814,"size":42,"client_ip":"179.110.194.42","user_agent":"PostmanRuntime/7.45.0","trace_id":"015eb4505ce08fc845673c97ef5a5c0e","span_id":"ffb30c44ea861d74","user_id":2,"user_role_id":2,"role_status":"pending_both"}
{"time":"2025-09-04T17:22:12.947766679Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendNotificationSync","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":118},"msg":"Processando requisiÃ§Ã£o de notificaÃ§Ã£o","type":"email","to":"giulio.alfieri@gmail.com","subject":"TOQ - CÃ³digo de alteraÃ§Ã£o de email"}
{"time":"2025-09-04T17:22:12.947950783Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendEmail","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":188},"msg":"Enviando notificaÃ§Ã£o por email","to":"giulio.alfieri@gmail.com","subject":"TOQ - CÃ³digo de alteraÃ§Ã£o de email"}
{"time":"2025-09-04T17:22:12.948034734Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/email.(*EmailAdapter).SendEmail","file":"/codigos/go_code/toq_server/internal/adapter/right/email/send_email.go","line":36},"msg":"Enviando email","attempt":1,"to":"giulio.alfieri@gmail.com","subject":"TOQ - CÃ³digo de alteraÃ§Ã£o de email"}
{"time":"2025-09-04T17:22:14.355222668Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/email.(*EmailAdapter).SendEmail","file":"/codigos/go_code/toq_server/internal/adapter/right/email/send_email.go","line":44},"msg":"Email enviado com sucesso","to":"giulio.alfieri@gmail.com","subject":"TOQ - CÃ³digo de alteraÃ§Ã£o de email","attempts":1}
{"time":"2025-09-04T17:22:14.355307249Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendEmail","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":208},"msg":"Email enviado com sucesso","to":"giulio.alfieri@gmail.com","subject":"TOQ - CÃ³digo de alteraÃ§Ã£o de email"}
{"time":"2025-09-04T17:22:39.711579405Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-04T17:22:39.721119298Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":1,"batch_size":1}
{"time":"2025-09-04T17:22:39.721292162Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-04T17:22:40.214659546Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"446753b6-c1cc-4075-a4e1-cbecdfc6501b","path":"/api/v2/user/email/confirm"}
{"time":"2025-09-04T17:22:40.215517573Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasHTTPPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_http_permission.go","line":26},"msg":"permission.http.check.start","user_id":2,"method":"POST","path":"/api/v2/user/email/confirm"}
{"time":"2025-09-04T17:22:40.218197694Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":46},"msg":"permission.check.start","user_id":2,"resource":"http","action":"POST:/api/v2/user/email/confirm"}
{"time":"2025-09-04T17:22:40.218635563Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).GetUserPermissions","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":318},"msg":"User permissions cache hit","userID":2,"dataSize":3827}
{"time":"2025-09-04T17:22:40.219212324Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsFromCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":165},"msg":"User permissions cache hit","userID":2,"count":25,"cached_at":"2025-09-04T17:22:12.940965798Z"}
{"time":"2025-09-04T17:22:40.219264945Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":91},"msg":"Permissions loaded from cache","userID":2,"count":25}
{"time":"2025-09-04T17:22:40.219293075Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":73},"msg":"permission.check.allowed","user_id":2,"resource":"http","action":"POST:/api/v2/user/email/confirm","permission_id":39}
{"time":"2025-09-04T17:22:40.219347246Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.PermissionMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/permission_middleware.go","line":71},"msg":"Permission granted","userID":2,"method":"POST","path":"/api/v2/user/email/confirm"}
{"time":"2025-09-04T17:22:40.231949068Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).UpdateUserRoleStatus","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/update_user_role_status_tx.go","line":43},"msg":"Updated user role status (tx)","userID":2,"role":"owner","status":5}
{"time":"2025-09-04T17:22:40.239716267Z","level":"INFO","msg":"HTTP Request","request_id":"446753b6-c1cc-4075-a4e1-cbecdfc6501b","method":"POST","path":"/api/v2/user/email/confirm","status":200,"duration":24954648,"size":40,"client_ip":"179.110.194.42","user_agent":"PostmanRuntime/7.45.0","trace_id":"1cbb398e25b88ab8ea555bc30008ff10","span_id":"e71b682c2f13716b","user_id":2,"user_role_id":2,"role_status":"pending_both"}
{"time":"2025-09-04T17:23:09.710600033Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-04T17:23:09.718886592Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":1,"batch_size":1}
{"time":"2025-09-04T17:23:09.719520044Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-04T17:23:39.711479173Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-04T17:23:39.714818257Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":0,"batch_size":1}
{"time":"2025-09-04T17:23:39.715283626Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-04T17:23:45.106109007Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"535efb0c-5833-4eb4-98e7-dafd3fa8fddb","path":"/api/v2/user/phone/resend"}
{"time":"2025-09-04T17:23:45.106890832Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasHTTPPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_http_permission.go","line":26},"msg":"permission.http.check.start","user_id":2,"method":"POST","path":"/api/v2/user/phone/resend"}
{"time":"2025-09-04T17:23:45.109138435Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":46},"msg":"permission.check.start","user_id":2,"resource":"http","action":"POST:/api/v2/user/phone/resend"}
{"time":"2025-09-04T17:23:45.109528492Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).GetUserPermissions","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":318},"msg":"User permissions cache hit","userID":2,"dataSize":3827}
{"time":"2025-09-04T17:23:45.110014991Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsFromCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":165},"msg":"User permissions cache hit","userID":2,"count":25,"cached_at":"2025-09-04T17:22:12.940965798Z"}
{"time":"2025-09-04T17:23:45.110064862Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":91},"msg":"Permissions loaded from cache","userID":2,"count":25}
{"time":"2025-09-04T17:23:45.110091953Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":73},"msg":"permission.check.allowed","user_id":2,"resource":"http","action":"POST:/api/v2/user/phone/resend","permission_id":43}
{"time":"2025-09-04T17:23:45.110142764Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.PermissionMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/permission_middleware.go","line":71},"msg":"Permission granted","userID":2,"method":"POST","path":"/api/v2/user/phone/resend"}
{"time":"2025-09-04T17:23:45.113910766Z","level":"INFO","msg":"HTTP Request","request_id":"535efb0c-5833-4eb4-98e7-dafd3fa8fddb","method":"POST","path":"/api/v2/user/phone/resend","status":200,"duration":7701428,"size":42,"client_ip":"179.110.194.42","user_agent":"PostmanRuntime/7.45.0","trace_id":"37be5e4fa3885dcb8acf6fb129eceb76","span_id":"f6b5c8a89fff79df","user_id":2,"user_role_id":2,"role_status":"pending_both"}
{"time":"2025-09-04T17:23:45.114004168Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendNotificationSync","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":118},"msg":"Processando requisiÃ§Ã£o de notificaÃ§Ã£o","type":"sms","to":"+5511999141768","subject":""}
{"time":"2025-09-04T17:23:45.114095119Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendSMS","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":216},"msg":"Enviando notificaÃ§Ã£o por SMS","to":"+5511999141768"}
Response: {"body":"TOQ - Seu cÃ³digo de validaÃ§Ã£o: R397W4","num_segments":"1","direction":"outbound-api","from":"+15405155642","to":"+5511999141768","date_updated":"Thu, 04 Sep 2025 17:23:45 +0000","uri":"/2010-04-01/Accounts/ACc8806b43030a5de367d142e99bcf0fa7/Messages/SM7b18a4d9e9d79e37102d72fc8bae5cdf.json","account_sid":"ACc8806b43030a5de367d142e99bcf0fa7","num_media":"0","status":"queued","sid":"SM7b18a4d9e9d79e37102d72fc8bae5cdf","date_created":"Thu, 04 Sep 2025 17:23:45 +0000","price_unit":"USD","api_version":"2010-04-01","subresource_uris":{"media":"/2010-04-01/Accounts/ACc8806b43030a5de367d142e99bcf0fa7/Messages/SM7b18a4d9e9d79e37102d72fc8bae5cdf/Media.json"}}
{"time":"2025-09-04T17:23:45.277509652Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendSMS","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":233},"msg":"SMS enviado com sucesso","to":"+5511999141768"}
{"time":"2025-09-04T17:24:09.710924525Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-04T17:24:09.719526729Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":1,"batch_size":1}
{"time":"2025-09-04T17:24:09.719748293Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-04T17:24:39.711194584Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-04T17:24:39.712945567Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":0,"batch_size":1}
{"time":"2025-09-04T17:24:39.71306729Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-04T17:24:47.056349276Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"e7fc8c37-80f0-40e3-8087-b4f8a539a475","path":"/api/v2/user/phone/confirm"}
{"time":"2025-09-04T17:24:47.056670152Z","level":"WARN","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.AuthMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/auth_middleware.go","line":56},"msg":"Invalid access token","error":"Token is expired","ip":"179.110.194.42"}
{"time":"2025-09-04T17:24:47.056887306Z","level":"WARN","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.StructuredLoggingMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/structured_logging_middleware.go","line":163},"msg":"HTTP Error","request_id":"e7fc8c37-80f0-40e3-8087-b4f8a539a475","method":"POST","path":"/api/v2/user/phone/confirm","status":401,"duration":427709,"size":45,"client_ip":"179.110.194.42","user_agent":"PostmanRuntime/7.45.0","trace_id":"81d165a5783a27fb6fa2982129524ebb","span_id":"297d9dee22eee1c2","function":"github.com/giulio-alfieri/toq_server/internal/core/utils.WrapDomainErrorWithSource","file":"/codigos/go_code/toq_server/internal/core/utils/http_errors.go","line":292,"stack":["github.com/giulio-alfieri/toq_server/internal/core/utils.WrapDomainErrorWithSource (http_errors.go:292)"],"error_code":401,"error_message":"Invalid access token","errors":["HTTP 401: Invalid access token"]}
{"time":"2025-09-04T17:24:53.818932905Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"ef3bc580-ec86-439b-b2f9-735c0a7aa998","path":"/api/v2/auth/refresh"}
{"time":"2025-09-04T17:25:13.673058865Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-04T17:25:13.677616742Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":0,"batch_size":1}
{"time":"2025-09-04T17:25:13.678119701Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-04T17:25:13.681144689Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*globalService).StartSessionEventSubscriber.func2","file":"/codigos/go_code/toq_server/internal/core/service/global_service/session_notification_subscriber.go","line":32},"msg":"session.event.received","type":"session.created","user_id":2,"session_id":2,"device_id":""}
{"time":"2025-09-04T17:25:13.684061334Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).refreshToken","file":"/codigos/go_code/toq_server/internal/core/service/user_service/refresh_token.go","line":151},"msg":"auth.refresh.ok","user_id":2,"prev_session_id":1}
{"time":"2025-09-04T17:25:13.684267798Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*globalService).StartSessionEventSubscriber.func2","file":"/codigos/go_code/toq_server/internal/core/service/global_service/session_notification_subscriber.go","line":32},"msg":"session.event.received","type":"session.rotated","user_id":2,"session_id":1,"device_id":""}
{"time":"2025-09-04T17:25:13.691956155Z","level":"INFO","msg":"HTTP Request","request_id":"ef3bc580-ec86-439b-b2f9-735c0a7aa998","method":"POST","path":"/api/v2/auth/refresh","status":200,"duration":19872855966,"size":640,"client_ip":"179.110.194.42","user_agent":"PostmanRuntime/7.45.0","trace_id":"c084626b43b6f27608b73a801f107ce6","span_id":"e7b03e4face177cb"}
{"time":"2025-09-04T17:25:31.700619701Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"85c9e87b-2435-4840-a1a5-c3d37e1785f3","path":"/api/v2/user/phone/confirm"}
{"time":"2025-09-04T17:25:31.701404516Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasHTTPPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_http_permission.go","line":26},"msg":"permission.http.check.start","user_id":2,"method":"POST","path":"/api/v2/user/phone/confirm"}
{"time":"2025-09-04T17:25:31.703995585Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":46},"msg":"permission.check.start","user_id":2,"resource":"http","action":"POST:/api/v2/user/phone/confirm"}
{"time":"2025-09-04T17:25:31.705012844Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).GetUserPermissions","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":318},"msg":"User permissions cache hit","userID":2,"dataSize":3827}
{"time":"2025-09-04T17:25:31.705690857Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsFromCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":165},"msg":"User permissions cache hit","userID":2,"count":25,"cached_at":"2025-09-04T17:22:12.940965798Z"}
{"time":"2025-09-04T17:25:31.705751648Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":91},"msg":"Permissions loaded from cache","userID":2,"count":25}
{"time":"2025-09-04T17:25:31.705788079Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":73},"msg":"permission.check.allowed","user_id":2,"resource":"http","action":"POST:/api/v2/user/phone/confirm","permission_id":42}
{"time":"2025-09-04T17:25:31.705996123Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.PermissionMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/permission_middleware.go","line":71},"msg":"Permission granted","userID":2,"method":"POST","path":"/api/v2/user/phone/confirm"}


2025/09/04 17:25:31 [Recovery] 2025/09/04 - 17:25:31 panic recovered:
POST /api/v2/user/phone/confirm HTTP/1.1
Host: gca.dev.br:8080
Accept: application/json
Accept-Encoding: gzip, deflate, br
Authorization: *
Connection: keep-alive
Content-Length: 22
Content-Type: application/json
Postman-Token: c0bf413e-1022-4595-a429-6153bca0ecc3
User-Agent: PostmanRuntime/7.45.0


runtime error: invalid memory address or nil pointer dereference
/usr/local/go/src/runtime/panic.go:262 (0x44d43d)
	panicmem: panic(memoryError)
/usr/local/go/src/runtime/signal_unix.go:925 (0x48b604)
	sigpanic: panicmem()
/codigos/go_code/toq_server/internal/core/service/user_service/update_userValidation_by_role.go:26 (0x12ddc6f)
	(*userService).UpdateUserValidationByUserRole: roleSlug := permissionmodel.RoleSlug(iUser.GetActiveRole().GetRole().GetSlug())
/codigos/go_code/toq_server/internal/core/service/user_service/confirm_phone_change.go:137 (0x12b056f)
	(*userService).confirmPhoneChange: _, err = us.UpdateUserValidationByUserRole(ctx, tx, &user, userValidation)
/codigos/go_code/toq_server/internal/core/service/user_service/confirm_phone_change.go:45 (0x12af78c)
	(*userService).ConfirmPhoneChange: err = us.confirmPhoneChange(ctx, tx, userID, code)
/codigos/go_code/toq_server/internal/adapter/left/http/handlers/user_handlers/confirm_phone_change.go:45 (0x13162ef)
	(*UserHandler).ConfirmPhoneChange: err := uh.userService.ConfirmPhoneChange(ctx, request.Code)
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0xdd2859)
	(*Context).Next: c.handlers[c.index](c)
/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/permission_middleware.go:72 (0x1301e9d)
	PermissionMiddleware.func1: c.Next()
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0xdd2859)
	(*Context).Next: c.handlers[c.index](c)
/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/auth_middleware.go:73 (0x12ffb95)
	AuthMiddleware.func1: c.Next()
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0xdd2859)
	(*Context).Next: c.handlers[c.index](c)
/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/device_context_middleware.go:25 (0x1306c4f)
	DeviceContextMiddleware.func1: c.Next()
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0xdd2859)
	(*Context).Next: c.handlers[c.index](c)
/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/metrics_middleware.go:32 (0x13013de)
	MetricsMiddleware.func1: c.Next()
/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/telemetry_middleware.go:113 (0x130638d)
	TelemetryMiddleware.func1: MetricsMiddleware(metricsAdapter)(c)
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0xdd2859)
	(*Context).Next: c.handlers[c.index](c)
/codigos/go_code/toq_server/internal/adapter/left/http/routes/routes.go:75 (0x297e111)
	setupGlobalMiddlewares.func1: c.Next()
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0xdd2859)
	(*Context).Next: c.handlers[c.index](c)
/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/structured_logging_middleware.go:60 (0x1302db4)
	StructuredLoggingMiddleware.func1: c.Next()
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0xdd2859)
	(*Context).Next: c.handlers[c.index](c)
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102 (0xde4713)
	CustomRecoveryWithWriter.func1: c.Next()
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0xdd2859)
	(*Context).Next: c.handlers[c.index](c)
/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go:47 (0x1302895)
	RequestIDMiddleware.func1: c.Next()
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 (0xdd2859)
	(*Context).Next: c.handlers[c.index](c)
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 (0xde2249)
	(*Engine).handleHTTPRequest: c.Next()
/home/toq_admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 (0xde1d1b)
	(*Engine).ServeHTTP: engine.handleHTTPRequest(c)
/usr/local/go/src/net/http/server.go:3340 (0x980d96)
	serverHandler.ServeHTTP: handler.ServeHTTP(rw, req)
/usr/local/go/src/net/http/server.go:2109 (0x94d384)
	(*conn).serve: serverHandler{c.server}.ServeHTTP(w, w.req)
/usr/local/go/src/runtime/asm_amd64.s:1693 (0x491160)
	goexit: BYTE	$0x90	// NOP

{"time":"2025-09-04T17:25:39.711057887Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-04T17:25:39.719591139Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":1,"batch_size":1}
{"time":"2025-09-04T17:25:39.719865154Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
