Starting: /home/toq_admin/go/bin/dlv dap --listen=127.0.0.1:46385 --log-dest=3 from /codigos/go_code/toq_server/cmd
DAP server listening at: 127.0.0.1:46385
Type 'dlv help' for list of commands.
{"time":"2025-10-07T06:40:42.430680733Z","level":"INFO","source":{"function":"main.main","file":"/codigos/go_code/toq_server/cmd/toq_server.go","line":255},"msg":"üöÄ Iniciando TOQ Server Bootstrap","version":"2.0.0","component":"bootstrap","log_level":"debug","log_format":"json","log_output":"stdout"}
{"time":"2025-10-07T06:40:42.430852708Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"‚ñ∂Ô∏è Executando fase","phase":"Phase01_InitializeContext","component":"bootstrap","timestamp":"2025-10-07T06:40:42Z"}
{"time":"2025-10-07T06:40:42.4309417Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase01_InitializeContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":24},"msg":"üéØ FASE 1: Inicializa√ß√£o de Contexto e Sinais"}
{"time":"2025-10-07T06:40:42.431006522Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase01_InitializeContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":25},"msg":"Configurando contexto base do sistema"}
{"time":"2025-10-07T06:40:42.431026143Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase01_InitializeContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":28},"msg":"Configurando sinais de shutdown graceful"}
{"time":"2025-10-07T06:40:42.431928368Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).createSystemUserContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":87},"msg":"üë§ Contexto do usu√°rio sistema criado","user_id":0}
{"time":"2025-10-07T06:40:42.432002801Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase01_InitializeContext","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":47},"msg":"‚úÖ Contexto e sinais inicializados com sucesso"}
{"time":"2025-10-07T06:40:42.432040612Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase01_InitializeContext","component":"bootstrap","duration":"1.195764ms"}
{"time":"2025-10-07T06:40:42.432076223Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"‚ñ∂Ô∏è Executando fase","phase":"Phase02_LoadConfiguration","component":"bootstrap","timestamp":"2025-10-07T06:40:42Z"}
{"time":"2025-10-07T06:40:42.432121684Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase02_LoadConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":19},"msg":"üéØ FASE 2: Carregamento e Valida√ß√£o de Configura√ß√£o"}
{"time":"2025-10-07T06:40:42.432162745Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase02_LoadConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":20},"msg":"Carregando configura√ß√£o do sistema"}
{"time":"2025-10-07T06:40:42.432182196Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).loadEnvironmentConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":43},"msg":"Carregando vari√°veis de ambiente"}
{"time":"2025-10-07T06:40:42.432836264Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startPprofServer.func1","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":106},"msg":"üîç Iniciando servidor pprof na porta 6060"}
{"time":"2025-10-07T06:40:42.432891616Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startPprofServer.func1","file":"/codigos/go_code/toq_server/internal/core/config/phase_01_context.go","line":118},"msg":"‚úÖ Servidor pprof iniciado em localhost:6060"}
{"time":"2025-10-07T06:40:42.434509592Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).LoadEnv","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":337},"msg":"Configuration loaded successfully from YAML","path":"configs/env.yaml"}
{"time":"2025-10-07T06:40:42.434568134Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).loadEnvironmentConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":58},"msg":"‚úÖ Vari√°veis de ambiente carregadas"}
{"time":"2025-10-07T06:40:42.434590224Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":64},"msg":"Validando configura√ß√£o completa"}
{"time":"2025-10-07T06:40:42.434612785Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateDatabaseConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":168},"msg":"Validando configura√ß√£o do banco de dados"}
{"time":"2025-10-07T06:40:42.434634226Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateDatabaseConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":206},"msg":"‚úÖ Configura√ß√£o do banco de dados validada com sucesso"}
{"time":"2025-10-07T06:40:42.434673377Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateHTTPConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":212},"msg":"Validando configura√ß√£o HTTP"}
{"time":"2025-10-07T06:40:42.434723798Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateHTTPConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":273},"msg":"‚úÖ Configura√ß√£o HTTP validada com sucesso"}
{"time":"2025-10-07T06:40:42.434750869Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateTelemetryConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":280},"msg":"Validando configura√ß√£o de telemetria"}
{"time":"2025-10-07T06:40:42.43477745Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateTelemetryConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":322},"msg":"‚úÖ Configura√ß√£o de telemetria validada com sucesso"}
{"time":"2025-10-07T06:40:42.43480244Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).validateConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":92},"msg":"‚úÖ Valida√ß√£o de configura√ß√£o conclu√≠da"}
{"time":"2025-10-07T06:40:42.434825251Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).applySecurityConfig","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":163},"msg":"üîê JWT and token TTL configuration applied"}
{"time":"2025-10-07T06:40:42.434846022Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase02_LoadConfiguration","file":"/codigos/go_code/toq_server/internal/core/config/phase_02_config.go","line":35},"msg":"‚úÖ Configura√ß√£o carregada e validada com sucesso","version":"2.0.0"}
{"time":"2025-10-07T06:40:42.434906153Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase02_LoadConfiguration","component":"bootstrap","duration":"2.830851ms"}
{"time":"2025-10-07T06:40:42.434939134Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"‚ñ∂Ô∏è Executando fase","phase":"Phase03_InitializeInfrastructure","component":"bootstrap","timestamp":"2025-10-07T06:40:42Z"}
{"time":"2025-10-07T06:40:42.435005216Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase03_InitializeInfrastructure","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":19},"msg":"üéØ FASE 3: Inicializa√ß√£o da Infraestrutura Core"}
{"time":"2025-10-07T06:40:42.435044617Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase03_InitializeInfrastructure","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":20},"msg":"Configurando infraestrutura fundamental"}
{"time":"2025-10-07T06:40:42.435111739Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeDatabase","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":48},"msg":"Inicializando conex√£o com banco de dados"}
{"time":"2025-10-07T06:40:42.438428764Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeDatabase","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":373},"msg":"Database connection initialized","uri":"toq_user:toq_password@tcp(localhost:3306)/toq_db?parseTime=true&loc=UTC&timeout=30s&readTimeout=30s&writeTimeout=30s"}
{"time":"2025-10-07T06:40:42.438488486Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeDatabase","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":64},"msg":"‚úÖ Conex√£o com banco de dados estabelecida"}
{"time":"2025-10-07T06:40:42.438512836Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeCache","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":70},"msg":"Inicializando sistema de cache Redis"}
{"time":"2025-10-07T06:40:42.438532027Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeCache","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":78},"msg":"Conectando ao Redis","url":"redis://localhost:6379/0"}
{"time":"2025-10-07T06:40:42.441032608Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.NewRedisCache","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":63},"msg":"Redis cache connected successfully","url":"redis://localhost:6379/0"}
{"time":"2025-10-07T06:40:42.44109831Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeCache","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":87},"msg":"‚úÖ Sistema de cache Redis inicializado com sucesso"}
{"time":"2025-10-07T06:40:42.44112408Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeTelemetry","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":93},"msg":"Inicializando sistema de telemetria OpenTelemetry"}
{"time":"2025-10-07T06:40:42.441377428Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*TelemetryManager).initializeTracing","file":"/codigos/go_code/toq_server/internal/core/config/telemetry.go","line":186},"msg":"OpenTelemetry tracing initialized","endpoint":"localhost:4318"}
{"time":"2025-10-07T06:40:42.441682406Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*TelemetryManager).initializeMetrics","file":"/codigos/go_code/toq_server/internal/core/config/telemetry.go","line":233},"msg":"OpenTelemetry metrics initialized","endpoint":"localhost:4318"}
{"time":"2025-10-07T06:40:42.444199798Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*TelemetryManager).initializeLogging","file":"/codigos/go_code/toq_server/internal/core/config/telemetry.go","line":131},"msg":"OpenTelemetry logs initialized","endpoint":"localhost:4318"}
{"time":"2025-10-07T06:40:42.444314742Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*TelemetryManager).Initialize","file":"/codigos/go_code/toq_server/internal/core/config/telemetry.go","line":73},"msg":"OpenTelemetry initialized successfully","tracing_enabled":true,"metrics_enabled":true,"endpoint":"localhost:4318"}
{"time":"2025-10-07T06:40:42.444379913Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeTelemetry","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":407},"msg":"OpenTelemetry initialized successfully"}
{"time":"2025-10-07T06:40:42.444431995Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeTelemetry","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":107},"msg":"‚úÖ OpenTelemetry inicializado (tracing + metrics)"}
{"time":"2025-10-07T06:40:42.444450085Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeMetrics","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":113},"msg":"Inicializando adapter de m√©tricas Prometheus"}
{"time":"2025-10-07T06:40:42.444490827Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateMetricsAdapter","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":63},"msg":"Creating metrics adapter"}
{"time":"2025-10-07T06:40:42.44600775Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeMetrics","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":138},"msg":"‚úÖ Adapter de m√©tricas Prometheus inicializado"}
{"time":"2025-10-07T06:40:42.449059856Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase03_InitializeInfrastructure","file":"/codigos/go_code/toq_server/internal/core/config/phase_03_infrastructure.go","line":42},"msg":"‚úÖ Infraestrutura core inicializada com sucesso"}
{"time":"2025-10-07T06:40:42.44918912Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase03_InitializeInfrastructure","component":"bootstrap","duration":"14.243286ms"}
{"time":"2025-10-07T06:40:42.449296753Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"‚ñ∂Ô∏è Executando fase","phase":"Phase04_InjectDependencies","component":"bootstrap","timestamp":"2025-10-07T06:40:42Z"}
{"time":"2025-10-07T06:40:42.449456848Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase04_InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":11},"msg":"üéØ FASE 4: Inje√ß√£o de Depend√™ncias via Factory Pattern"}
{"time":"2025-10-07T06:40:42.44954764Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase04_InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":12},"msg":"Configurando inje√ß√£o de depend√™ncias"}
{"time":"2025-10-07T06:40:42.449639283Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeLifecycleManager","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":30},"msg":"Inicializando lifecycle manager"}
{"time":"2025-10-07T06:40:42.449672554Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeLifecycleManager","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":35},"msg":"‚úÖ Lifecycle manager inicializado"}
{"time":"2025-10-07T06:40:42.449768137Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":20},"msg":"Starting dependency injection using Factory Pattern"}
{"time":"2025-10-07T06:40:42.449966422Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":21},"msg":"InjectDependencies method called on config instance"}
{"time":"2025-10-07T06:40:42.450093036Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.ValidateFactoryConfig","file":"/codigos/go_code/toq_server/internal/core/factory/validation.go","line":13},"msg":"Validating factory configuration"}
{"time":"2025-10-07T06:40:42.45023656Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.ValidateFactoryConfig","file":"/codigos/go_code/toq_server/internal/core/factory/validation.go","line":28},"msg":"Factory configuration validation successful"}
{"time":"2025-10-07T06:40:42.450390234Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateStorageAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":146},"msg":"Creating storage adapters"}
{"time":"2025-10-07T06:40:42.457831587Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.NewRedisCache","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":63},"msg":"Redis cache connected successfully","url":"redis://localhost:6379/0"}
{"time":"2025-10-07T06:40:42.45794419Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateStorageAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":165},"msg":"Successfully created all storage adapters"}
{"time":"2025-10-07T06:40:42.457983301Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).createActivityTracker","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":236},"msg":"‚úÖ ActivityTracker criado com sucesso com Redis client"}
{"time":"2025-10-07T06:40:42.458016642Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateRepositoryAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":177},"msg":"Creating repository adapters"}
{"time":"2025-10-07T06:40:42.458118905Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateRepositoryAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":200},"msg":"Successfully created all repository adapters"}
{"time":"2025-10-07T06:40:42.458160826Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).assignRepositoryAdapters","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":143},"msg":"Assigning repository adapters"}
{"time":"2025-10-07T06:40:42.458196257Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).assignRepositoryAdapters","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":179},"msg":"Repository adapters assigned successfully"}
{"time":"2025-10-07T06:40:42.458228638Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateValidationAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":75},"msg":"Creating validation adapters"}
{"time":"2025-10-07T06:40:42.458270529Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateValidationAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":95},"msg":"Successfully created all validation adapters"}
{"time":"2025-10-07T06:40:42.45830463Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":84},"msg":"Creating external service adapters"}
{"time":"2025-10-07T06:40:42.458339971Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateExternalServiceAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":107},"msg":"Creating external service adapters"}
{"time":"2025-10-07T06:40:42.46041279Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.NewS3Adapter","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/s3_adapter.go","line":24},"msg":"Creating S3 adapter","region":"us-east-1","bucket":"toq-app-media"}
{"time":"2025-10-07T06:40:42.461081299Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.NewS3Adapter","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/s3_adapter.go","line":76},"msg":"S3 adapter created successfully","bucket":"toq-app-media","region":"us-east-1"}
{"time":"2025-10-07T06:40:42.461154831Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateExternalServiceAdapters","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":132},"msg":"Successfully created all external service adapters"}
{"time":"2025-10-07T06:40:42.461196602Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).initializeServices","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":199},"msg":"Initializing all services"}
{"time":"2025-10-07T06:40:42.461291475Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":108},"msg":"Initializing Global Service"}
{"time":"2025-10-07T06:40:42.461333616Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).SetGlobalService","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":77},"msg":"GlobalService injected into RedisCache"}
{"time":"2025-10-07T06:40:42.461480041Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":164},"msg":"GlobalService injected into Redis cache"}
{"time":"2025-10-07T06:40:42.461524712Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitPermissionHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":208},"msg":"Initializing Permission Handler"}
{"time":"2025-10-07T06:40:42.461561153Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitComplexHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":189},"msg":"Initializing Complex Handler"}
{"time":"2025-10-07T06:40:42.461596244Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitListingHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":197},"msg":"Initializing Listing Handler"}
{"time":"2025-10-07T06:40:42.461630755Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitUserHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":174},"msg":"Initializing User Handler"}
{"time":"2025-10-07T06:40:42.461664686Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).initializeServices","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":208},"msg":"All services initialized successfully"}
{"time":"2025-10-07T06:40:42.461703947Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeTempBlockCleaner","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":308},"msg":"‚úÖ TempBlockCleanerWorker initialized"}
{"time":"2025-10-07T06:40:42.461740428Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":102},"msg":"Dependency injection completed successfully using Factory Pattern"}
{"time":"2025-10-07T06:40:42.461777179Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase04_InjectDependencies","file":"/codigos/go_code/toq_server/internal/core/config/phase_04_dependencies.go","line":24},"msg":"‚úÖ Inje√ß√£o de depend√™ncias conclu√≠da via Factory Pattern"}
{"time":"2025-10-07T06:40:42.461860861Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase04_InjectDependencies","component":"bootstrap","duration":"12.563798ms"}
{"time":"2025-10-07T06:40:42.461940514Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"‚ñ∂Ô∏è Executando fase","phase":"Phase05_InitializeServices","component":"bootstrap","timestamp":"2025-10-07T06:40:42Z"}
{"time":"2025-10-07T06:40:42.462027386Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":16},"msg":"üéØ FASE 5: Inicializa√ß√£o de Servi√ßos"}
{"time":"2025-10-07T06:40:42.462452858Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":17},"msg":"Inicializando servi√ßos na ordem correta"}
{"time":"2025-10-07T06:40:42.462477939Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando servi√ßo","service":"GlobalService"}
{"time":"2025-10-07T06:40:42.46250104Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":45},"msg":"Inicializando Global Service"}
{"time":"2025-10-07T06:40:42.46252038Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":108},"msg":"Initializing Global Service"}
{"time":"2025-10-07T06:40:42.462581372Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).SetGlobalService","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":77},"msg":"GlobalService injected into RedisCache"}
{"time":"2025-10-07T06:40:42.462618863Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":164},"msg":"GlobalService injected into Redis cache"}
{"time":"2025-10-07T06:40:42.462652674Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeGlobalService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":53},"msg":"‚úÖ Global Service inicializado"}
{"time":"2025-10-07T06:40:42.462675115Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"‚úÖ Servi√ßo inicializado","service":"GlobalService"}
{"time":"2025-10-07T06:40:42.462696065Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando servi√ßo","service":"PermissionService"}
{"time":"2025-10-07T06:40:42.462716026Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializePermissionService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":59},"msg":"Inicializando Permission Service"}
{"time":"2025-10-07T06:40:42.462734946Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitPermissionHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":208},"msg":"Initializing Permission Handler"}
{"time":"2025-10-07T06:40:42.462768777Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializePermissionService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":64},"msg":"‚úÖ Permission Service inicializado"}
{"time":"2025-10-07T06:40:42.462791908Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"‚úÖ Servi√ßo inicializado","service":"PermissionService"}
{"time":"2025-10-07T06:40:42.46286931Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando servi√ßo","service":"UserService"}
{"time":"2025-10-07T06:40:42.462898211Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":70},"msg":"Inicializando User Service"}
{"time":"2025-10-07T06:40:42.462919372Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitUserHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":174},"msg":"Initializing User Handler"}
{"time":"2025-10-07T06:40:42.462955753Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":75},"msg":"‚úÖ User Service inicializado"}
{"time":"2025-10-07T06:40:42.462979453Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"‚úÖ Servi√ßo inicializado","service":"UserService"}
{"time":"2025-10-07T06:40:42.463001624Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando servi√ßo","service":"ComplexService"}
{"time":"2025-10-07T06:40:42.463021405Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeComplexService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":81},"msg":"Inicializando Complex Service"}
{"time":"2025-10-07T06:40:42.463040155Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitComplexHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":189},"msg":"Initializing Complex Handler"}
{"time":"2025-10-07T06:40:42.463081616Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeComplexService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":86},"msg":"‚úÖ Complex Service inicializado"}
{"time":"2025-10-07T06:40:42.463105377Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"‚úÖ Servi√ßo inicializado","service":"ComplexService"}
{"time":"2025-10-07T06:40:42.463134658Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":32},"msg":"Inicializando servi√ßo","service":"ListingService"}
{"time":"2025-10-07T06:40:42.463160969Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeListingService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":92},"msg":"Inicializando Listing Service"}
{"time":"2025-10-07T06:40:42.463181249Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitListingHandler","file":"/codigos/go_code/toq_server/internal/core/config/inject_dependencies.go","line":197},"msg":"Initializing Listing Handler"}
{"time":"2025-10-07T06:40:42.463352684Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeListingService","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":97},"msg":"‚úÖ Listing Service inicializado"}
{"time":"2025-10-07T06:40:42.463379225Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":36},"msg":"‚úÖ Servi√ßo inicializado","service":"ListingService"}
{"time":"2025-10-07T06:40:42.463400605Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase05_InitializeServices","file":"/codigos/go_code/toq_server/internal/core/config/phase_05_services.go","line":39},"msg":"‚úÖ Todos os servi√ßos inicializados com sucesso"}
{"time":"2025-10-07T06:40:42.463434716Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase05_InitializeServices","component":"bootstrap","duration":"1.496843ms"}
{"time":"2025-10-07T06:40:42.463465217Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"‚ñ∂Ô∏è Executando fase","phase":"Phase06_ConfigureHandlers","component":"bootstrap","timestamp":"2025-10-07T06:40:42Z"}
{"time":"2025-10-07T06:40:42.463505898Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase06_ConfigureHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":14},"msg":"üéØ FASE 6: Configura√ß√£o de Handlers e Rotas"}
{"time":"2025-10-07T06:40:42.463541029Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase06_ConfigureHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":15},"msg":"Configurando handlers HTTP e sistema de rotas"}
{"time":"2025-10-07T06:40:42.46355964Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":68},"msg":"Inicializando servidor HTTP com middleware"}
{"time":"2025-10-07T06:40:42.463609531Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).SetupHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":432},"msg":"HTTP server initialized","port":"127.0.0.1:8080","read_timeout":"30s","write_timeout":"30s"}
{"time":"2025-10-07T06:40:42.463689814Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeHTTP","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":417},"msg":"HTTP server initialization completed"}
{"time":"2025-10-07T06:40:42.463727615Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":78},"msg":"‚úÖ Servidor HTTP configurado com TLS e middleware"}
{"time":"2025-10-07T06:40:42.463749385Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).createHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":84},"msg":"Criando handlers HTTP via Factory Pattern"}
{"time":"2025-10-07T06:40:42.463769126Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).createHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":88},"msg":"‚úÖ Handlers HTTP preparados para cria√ß√£o"}
{"time":"2025-10-07T06:40:42.463795897Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).setupRoutesAndMiddleware","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":94},"msg":"Configurando rotas e middlewares"}
{"time":"2025-10-07T06:40:42.463815917Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).createHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":474},"msg":"Creating HTTP handlers via factory pattern"}
{"time":"2025-10-07T06:40:42.463858108Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":223},"msg":"Creating HTTP handlers"}
{"time":"2025-10-07T06:40:42.46389712Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/factory.(*ConcreteAdapterFactory).CreateHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/factory/concrete_adapter_factory.go","line":258},"msg":"Successfully created all HTTP handlers"}
{"time":"2025-10-07T06:40:42.463931991Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).createHTTPHandlers","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":499},"msg":"‚úÖ HTTP handlers created successfully via factory"}
{"time":"2025-10-07T06:40:42.464986931Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).SetupHTTPHandlersAndRoutes","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":469},"msg":"HTTP handlers and routes configured successfully"}
{"time":"2025-10-07T06:40:42.465072353Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).setupRoutesAndMiddleware","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":99},"msg":"‚úÖ Rotas e middlewares configurados"}
{"time":"2025-10-07T06:40:42.465102244Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).setupHealthChecks","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":105},"msg":"Configurando health checks (liveness/readiness)"}
{"time":"2025-10-07T06:40:42.465124535Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).setupHealthChecks","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":110},"msg":"‚úÖ Health checks configurados"}
{"time":"2025-10-07T06:40:42.465144155Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase06_ConfigureHandlers","file":"/codigos/go_code/toq_server/internal/core/config/phase_06_handlers.go","line":62},"msg":"‚úÖ Handlers e rotas configurados com sucesso"}
{"time":"2025-10-07T06:40:42.465211587Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase06_ConfigureHandlers","component":"bootstrap","duration":"1.74303ms"}
{"time":"2025-10-07T06:40:42.465289749Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"‚ñ∂Ô∏è Executando fase","phase":"Phase07_StartBackgroundWorkers","component":"bootstrap","timestamp":"2025-10-07T06:40:42Z"}
{"time":"2025-10-07T06:40:42.465469094Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase07_StartBackgroundWorkers","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":12},"msg":"üéØ FASE 7: Inicializa√ß√£o de Background Workers"}
{"time":"2025-10-07T06:40:42.465541446Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase07_StartBackgroundWorkers","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":13},"msg":"Configurando workers em background"}
{"time":"2025-10-07T06:40:42.465564997Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeSystemGoroutines","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":36},"msg":"Inicializando goroutines do sistema"}
{"time":"2025-10-07T06:40:42.465616239Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeGoRoutines","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":236},"msg":"Activity tracker batch worker started"}
{"time":"2025-10-07T06:40:42.465712201Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).StartBatchWorker","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":56},"msg":"Activity batch worker started","interval":30000000000}
{"time":"2025-10-07T06:40:42.465876726Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeGoRoutines","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":248},"msg":"Temp block cleaner worker started"}
{"time":"2025-10-07T06:40:42.465955948Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*TempBlockCleanerWorker).Start","file":"/codigos/go_code/toq_server/internal/core/go_routines/temp_block_cleaner_worker.go","line":34},"msg":"TempBlockCleanerWorker started"}
{"time":"2025-10-07T06:40:42.466033411Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*TempBlockCleanerWorker).processExpiredBlocks","file":"/codigos/go_code/toq_server/internal/core/go_routines/temp_block_cleaner_worker.go","line":68},"msg":"Processing expired temporary blocks"}
{"time":"2025-10-07T06:40:42.46636075Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).GetExpiredTempBlockedUsers","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/user_blocking.go","line":132},"msg":"permission.user.temp_block.get_expired.start"}
{"time":"2025-10-07T06:40:42.466696289Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeGoRoutines","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":262},"msg":"Session cleaner worker started","interval_seconds":300}
{"time":"2025-10-07T06:40:42.467006178Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeGoRoutines","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":279},"msg":"Validation cleaner worker started","interval_seconds":300}
{"time":"2025-10-07T06:40:42.4670674Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).initializeSystemGoroutines","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":41},"msg":"‚úÖ Background workers inicializados"}
{"time":"2025-10-07T06:40:42.467093671Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).linkActivityTrackerToUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":47},"msg":"Verificando e conectando activity tracker ao user service"}
{"time":"2025-10-07T06:40:42.467116991Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).SetActivityTrackerUserService","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":289},"msg":"Activity tracker connected to user service"}
{"time":"2025-10-07T06:40:42.467164003Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).linkActivityTrackerToUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":57},"msg":"‚úÖ Activity tracker conectado ao user service"}
{"time":"2025-10-07T06:40:42.467803361Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).verifyDatabaseSchema","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":63},"msg":"Verificando schema do banco de dados"}
{"time":"2025-10-07T06:40:42.467939855Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.SessionCleaner","file":"/codigos/go_code/toq_server/internal/core/go_routines/session_cleaner_worker.go","line":15},"msg":"session cleaner routine started"}
{"time":"2025-10-07T06:40:42.469007355Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.ValidationCleaner","file":"/codigos/go_code/toq_server/internal/core/go_routines/validation_cleaner_worker.go","line":14},"msg":"validation cleaner worker started","interval":300000000000}
{"time":"2025-10-07T06:40:42.469795008Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/permission.(*PermissionAdapter).GetExpiredTempBlockedUsers","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/permission/user_blocking.go","line":103},"msg":"Found expired temp blocked users","count":0}
{"time":"2025-10-07T06:40:42.471062124Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*TempBlockCleanerWorker).processExpiredBlocks","file":"/codigos/go_code/toq_server/internal/core/go_routines/temp_block_cleaner_worker.go","line":77},"msg":"No expired temporary blocks found"}
{"time":"2025-10-07T06:40:42.472215977Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).VerifyDatabase","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":389},"msg":"Database connection verified successfully"}
{"time":"2025-10-07T06:40:42.47232423Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).verifyDatabaseSchema","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":68},"msg":"‚úÖ Schema do banco de dados verificado"}
{"time":"2025-10-07T06:40:42.472353991Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase07_StartBackgroundWorkers","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":30},"msg":"‚úÖ Background workers inicializados com sucesso"}
{"time":"2025-10-07T06:40:42.472387301Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase07_StartBackgroundWorkers","component":"bootstrap","duration":"7.097472ms"}
{"time":"2025-10-07T06:40:42.472419172Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"‚ñ∂Ô∏è Executando fase","phase":"Phase08_StartServer","component":"bootstrap","timestamp":"2025-10-07T06:40:42Z"}
{"time":"2025-10-07T06:40:42.472495555Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase08_StartServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":18},"msg":"üéØ FASE 8: Inicializa√ß√£o Final e Runtime"}
{"time":"2025-10-07T06:40:42.472599998Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase08_StartServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":19},"msg":"Preparando servidor para aceitar conex√µes"}
{"time":"2025-10-07T06:40:42.472627698Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).markServerReady","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":42},"msg":"Marcando servidor como pronto para tr√°fego"}
{"time":"2025-10-07T06:40:42.472646949Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).markServerReady","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":47},"msg":"‚úÖ Servidor marcado como ready para receber tr√°fego"}
{"time":"2025-10-07T06:40:42.472707531Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":53},"msg":"Iniciando servidor HTTP"}
{"time":"2025-10-07T06:40:42.472781273Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHTTPServer.func1","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":71},"msg":"üöÄ Iniciando servidor HTTP na porta configurada"}
{"time":"2025-10-07T06:40:42.573816152Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":96},"msg":"‚úÖ Servidor HTTP iniciado com sucesso"}
{"time":"2025-10-07T06:40:42.573892135Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHealthMonitoring","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":102},"msg":"Iniciando monitoramento de sa√∫de em runtime"}
{"time":"2025-10-07T06:40:42.573932116Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHealthMonitoring","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":127},"msg":"‚úÖ Monitoramento de sa√∫de em runtime iniciado"}
{"time":"2025-10-07T06:40:42.573958726Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase08_StartServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":34},"msg":"üåü TOQ Server pronto para servir","uptime":143125159}
{"time":"2025-10-07T06:40:42.574008298Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase08_StartServer","component":"bootstrap","duration":"101.586506ms"}
{"time":"2025-10-07T06:40:42.574046559Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Bootstrap","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":137},"msg":"üéâ TOQ Server inicializado com sucesso","component":"bootstrap","total_time":"143.213332ms"}
{"time":"2025-10-07T06:41:12.467218515Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":79},"msg":"No active users to process"}
{"time":"2025-10-07T06:41:33.247576147Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"bb163a08-15fb-432d-a8f8-e91c67ede8a2","path":"/api/v2/auth/validate/cpf"}
{"time":"2025-10-07T06:41:33.248401621Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cpf.(*CPFAdapter).GetCpf","file":"/codigos/go_code/toq_server/internal/adapter/right/cpf/cpf_validation_adapter.go","line":67},"msg":"cpf.validation.request","cpf":"*******4806","born_at":"14/06/1963"}
{"time":"2025-10-07T06:41:33.439060513Z","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cpf.logProviderError","file":"/codigos/go_code/toq_server/internal/adapter/right/cpf/cpf_validation_adapter.go","line":255},"msg":"cpf.validation.provider_error","err":"cpf infra error: Parametro Invalido."}
{"time":"2025-10-07T06:41:33.439207588Z","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).handleCPFValidationError","file":"/codigos/go_code/toq_server/internal/core/service/user_service/validate_user_data.go","line":153},"msg":"user.validate_user_data.cpf_infra_error","err":"cpf infra error: Parametro Invalido."}
{"time":"2025-10-07T06:41:33.439487616Z","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.StructuredLoggingMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/structured_logging_middleware.go","line":156},"msg":"HTTP Error","request_id":"bb163a08-15fb-432d-a8f8-e91c67ede8a2","method":"POST","path":"/api/v2/auth/validate/cpf","status":500,"duration":191725893,"size":71,"client_ip":"93.36.219.178","user_agent":"PostmanRuntime/7.48.0","trace_id":"d35081b7835fc71ee79e71a677fa8021","span_id":"56a41a1f3b503954","function":"github.com/giulio-alfieri/toq_server/internal/core/utils.InternalError","file":"/codigos/go_code/toq_server/internal/core/utils/http_errors.go","line":238,"stack":["github.com/giulio-alfieri/toq_server/internal/core/utils.InternalError (http_errors.go:238)"],"error_code":500,"error_message":"Failed to validate national ID.","errors":["HTTP 500: Failed to validate national ID."]}
{"time":"2025-10-07T06:41:42.467004159Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":79},"msg":"No active users to process"}
{"time":"2025-10-07T06:42:06.084581189Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"ea7839f2-00da-4a41-9bf2-d514b57ffe66","path":"/api/v2/auth/validate/cep"}
{"time":"2025-10-07T06:42:06.085187497Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cep.(*CEPAdapter).GetCep","file":"/codigos/go_code/toq_server/internal/adapter/right/cep/cep_validation_adapter.go","line":63},"msg":"cep.validation.request","cep":"*****400"}
{"time":"2025-10-07T06:42:06.148497342Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cep.(*CEPAdapter).GetCep","file":"/codigos/go_code/toq_server/internal/adapter/right/cep/cep_validation_adapter.go","line":121},"msg":"cep.validation.success","cep":"*****400","consumed":0}
{"time":"2025-10-07T06:42:06.1487844Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.StructuredLoggingMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/structured_logging_middleware.go","line":156},"msg":"HTTP Request","request_id":"ea7839f2-00da-4a41-9bf2-d514b57ffe66","method":"POST","path":"/api/v2/auth/validate/cep","status":200,"duration":64055726,"size":167,"client_ip":"93.36.219.178","user_agent":"PostmanRuntime/7.48.0","trace_id":"17a844f2c54f46099504103c4dba69d3","span_id":"f1504151e1d701b0"}
{"time":"2025-10-07T06:42:12.466659573Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":79},"msg":"No active users to process"}
{"time":"2025-10-07T06:42:13.633407904Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"809f7f06-fcd8-4be2-8ab0-a3cea1a0a6c8","path":"/api/v2/auth/validate/cpf"}
{"time":"2025-10-07T06:42:13.63394617Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cpf.(*CPFAdapter).GetCpf","file":"/codigos/go_code/toq_server/internal/adapter/right/cpf/cpf_validation_adapter.go","line":67},"msg":"cpf.validation.request","cpf":"*******4805","born_at":"14/06/1963"}
{"time":"2025-10-07T06:42:13.73787571Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cpf.(*CPFAdapter).GetCpf","file":"/codigos/go_code/toq_server/internal/adapter/right/cpf/cpf_validation_adapter.go","line":135},"msg":"cpf.validation.success","cpf":"*******4805","consumed":1}
{"time":"2025-10-07T06:42:13.738112827Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.StructuredLoggingMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/structured_logging_middleware.go","line":156},"msg":"HTTP Request","request_id":"809f7f06-fcd8-4be2-8ab0-a3cea1a0a6c8","method":"POST","path":"/api/v2/auth/validate/cpf","status":200,"duration":104579259,"size":14,"client_ip":"93.36.219.178","user_agent":"PostmanRuntime/7.48.0","trace_id":"5bc0bc31ae76bc15189866dd5411a06a","span_id":"0c10c43b869ebc14"}
{"time":"2025-10-07T06:42:30.801729914Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"19eae102-ed2b-456f-99c4-58d2347e3784","path":"/api/v2/auth/validate/cpf"}
{"time":"2025-10-07T06:42:30.802361092Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cpf.(*CPFAdapter).GetCpf","file":"/codigos/go_code/toq_server/internal/adapter/right/cpf/cpf_validation_adapter.go","line":67},"msg":"cpf.validation.request","cpf":"*******4805","born_at":"15/06/1963"}
{"time":"2025-10-07T06:42:30.868518731Z","level":"WARN","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cpf.logProviderError","file":"/codigos/go_code/toq_server/internal/adapter/right/cpf/cpf_validation_adapter.go","line":259},"msg":"cpf.validation.birth_date_mismatch","err":"cpf data mismatch"}
{"time":"2025-10-07T06:42:30.868673275Z","level":"WARN","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).handleCPFValidationError","file":"/codigos/go_code/toq_server/internal/core/service/user_service/validate_user_data.go","line":140},"msg":"user.validate_user_data.cpf_birth_date_mismatch","err":"cpf data mismatch"}
{"time":"2025-10-07T06:42:30.868877641Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.StructuredLoggingMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/structured_logging_middleware.go","line":156},"msg":"HTTP Response","request_id":"19eae102-ed2b-456f-99c4-58d2347e3784","method":"POST","path":"/api/v2/auth/validate/cpf","status":400,"duration":67020524,"size":157,"client_ip":"93.36.219.178","user_agent":"PostmanRuntime/7.48.0","trace_id":"6f8acb1b41e65941d8e931672fa45aaf","span_id":"4f77e822e338b01c"}
{"time":"2025-10-07T06:42:42.470037844Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":79},"msg":"No active users to process"}
Detaching and terminating target process
dlv dap (117286) exited with code: 0
thub.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).linkActivityTrackerToUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":47},"msg":"Verificando e conectando activity tracker ao user service"}
{"time":"2025-09-05T15:31:48.635419502Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).SetActivityTrackerUserService","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":291},"msg":"Activity tracker connected to user service"}
{"time":"2025-09-05T15:31:48.635448072Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).linkActivityTrackerToUserService","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":57},"msg":"‚úÖ Activity tracker conectado ao user service"}
{"time":"2025-09-05T15:31:48.635466133Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).verifyDatabaseSchema","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":63},"msg":"Verificando schema do banco de dados"}
{"time":"2025-09-05T15:31:48.635638855Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*TempBlockCleanerWorker).Start","file":"/codigos/go_code/toq_server/internal/core/go_routines/temp_block_cleaner_worker.go","line":34},"msg":"TempBlockCleanerWorker started"}
{"time":"2025-09-05T15:31:48.635680146Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*TempBlockCleanerWorker).processExpiredBlocks","file":"/codigos/go_code/toq_server/internal/core/go_routines/temp_block_cleaner_worker.go","line":68},"msg":"Processing expired temporary blocks"}
{"time":"2025-09-05T15:31:48.636393818Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).StartBatchWorker","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":55},"msg":"Activity batch worker started","interval":30000000000}
{"time":"2025-09-05T15:31:48.636515Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.SessionCleaner","file":"/codigos/go_code/toq_server/internal/core/go_routines/session_cleaner_worker.go","line":14},"msg":"session cleaner routine started"}
{"time":"2025-09-05T15:31:48.63656129Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.ValidationCleaner","file":"/codigos/go_code/toq_server/internal/core/go_routines/validation_cleaner_worker.go","line":13},"msg":"validation cleaner worker started","interval":300000000000}
{"time":"2025-09-05T15:31:48.637339063Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).VerifyDatabase","file":"/codigos/go_code/toq_server/internal/core/config/config_model.go","line":456},"msg":"Database connection verified successfully"}
{"time":"2025-09-05T15:31:48.637419804Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).verifyDatabaseSchema","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":68},"msg":"‚úÖ Schema do banco de dados verificado"}
{"time":"2025-09-05T15:31:48.637448345Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase07_StartBackgroundWorkers","file":"/codigos/go_code/toq_server/internal/core/config/phase_07_workers.go","line":30},"msg":"‚úÖ Background workers inicializados com sucesso"}
{"time":"2025-09-05T15:31:48.63779229Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase07_StartBackgroundWorkers","component":"bootstrap","duration":"2.535861ms"}
{"time":"2025-09-05T15:31:48.637834801Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseStart","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":88},"msg":"‚ñ∂Ô∏è Executando fase","phase":"Phase08_StartServer","component":"bootstrap","timestamp":"2025-09-05T15:31:48Z"}
{"time":"2025-09-05T15:31:48.638015504Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase08_StartServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":18},"msg":"üéØ FASE 8: Inicializa√ß√£o Final e Runtime"}
{"time":"2025-09-05T15:31:48.638202107Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase08_StartServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":19},"msg":"Preparando servidor para aceitar conex√µes"}
{"time":"2025-09-05T15:31:48.638238208Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).markServerReady","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":42},"msg":"Marcando servidor como pronto para tr√°fego"}
{"time":"2025-09-05T15:31:48.63838099Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).markServerReady","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":47},"msg":"‚úÖ Servidor marcado como ready para receber tr√°fego"}
{"time":"2025-09-05T15:31:48.63841381Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":53},"msg":"Iniciando servidor HTTP"}
{"time":"2025-09-05T15:31:48.638584113Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHTTPServer.func1","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":71},"msg":"üöÄ Iniciando servidor HTTP na porta configurada"}
{"time":"2025-09-05T15:31:48.641955348Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/permission.(*PermissionAdapter).GetExpiredTempBlockedUsers","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/permission/user_blocking.go","line":103},"msg":"Found expired temp blocked users","count":0}
{"time":"2025-09-05T15:31:48.643680555Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*TempBlockCleanerWorker).processExpiredBlocks","file":"/codigos/go_code/toq_server/internal/core/go_routines/temp_block_cleaner_worker.go","line":77},"msg":"No expired temporary blocks found"}
{"time":"2025-09-05T15:31:48.739351891Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHTTPServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":96},"msg":"‚úÖ Servidor HTTP iniciado com sucesso"}
{"time":"2025-09-05T15:31:48.739429592Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHealthMonitoring","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":102},"msg":"Iniciando monitoramento de sa√∫de em runtime"}
{"time":"2025-09-05T15:31:48.739475933Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).startHealthMonitoring","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":127},"msg":"‚úÖ Monitoramento de sa√∫de em runtime iniciado"}
{"time":"2025-09-05T15:31:48.739500563Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Phase08_StartServer","file":"/codigos/go_code/toq_server/internal/core/config/phase_08_startup.go","line":34},"msg":"üåü TOQ Server pronto para servir","uptime":123249381}
{"time":"2025-09-05T15:31:48.739534654Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).logPhaseEnd","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":96},"msg":"‚úÖ Fase conclu√≠da","phase":"Phase08_StartServer","component":"bootstrap","duration":"101.698553ms"}
{"time":"2025-09-05T15:31:48.739601175Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*Bootstrap).Bootstrap","file":"/codigos/go_code/toq_server/internal/core/config/bootstrap.go","line":137},"msg":"üéâ TOQ Server inicializado com sucesso","component":"bootstrap","total_time":"123.348743ms"}
{"time":"2025-09-05T15:31:54.43516775Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"f9d0d97d-44b0-4dc7-8c00-ee2f9b2e52de","path":"/api/v2/auth/owner"}
{"time":"2025-09-05T15:31:54.436732156Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/handlers/auth_handlers.(*AuthHandler).CreateOwner","file":"/codigos/go_code/toq_server/internal/adapter/left/http/handlers/auth_handlers/create_owner.go","line":64},"msg":"auth.create_owner.debug","device_token":"fcm device token","ip":"177.9.64.219","user_agent":"PostmanRuntime/7.45.0","header_device_id":"","ctx_device_id":""}
{"time":"2025-09-05T15:31:54.440231352Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cpf.(*CPFAdapter).GetCpf","file":"/codigos/go_code/toq_server/internal/adapter/right/cpf/cpf_validation_adapter.go","line":32},"msg":"Making request to CPF API","url":"https://ws.hubdodesenvolvedor.com.br/v2/cpf/?cpf=04679654805&data=14/06/1963&token=164634160QpAPJYxHbS297241984","cpf":"04679654805","bornAt":"14/06/1963"}
{"time":"2025-09-05T15:31:54.679387346Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/cep.(*CEPAdapter).GetCep","file":"/codigos/go_code/toq_server/internal/adapter/right/cep/cep_validation_adapter.go","line":30},"msg":"Making request to CEP API","url":"https://ws.hubdodesenvolvedor.com.br/v2/cep/?cep=06540400&token=164634160QpAPJYxHbS297241984","cep":"06540400"}
{"time":"2025-09-05T15:31:54.885465696Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).AssignRoleToUserWithTx","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/assign_role_to_user.go","line":60},"msg":"permission.role.assign.request","user_id":2,"role_id":3,"expires_at":null}
{"time":"2025-09-05T15:31:54.888934412Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).AssignRoleToUserWithTx","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/assign_role_to_user.go","line":96},"msg":"permission.role.assigned","user_id":2,"role_id":3,"role_name":"Propriet√°rio"}
{"time":"2025-09-05T15:31:54.890467077Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.(*S3Adapter).CreateUserFolder","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/create_user_folder.go","line":19},"msg":"Creating user folder structure in S3","userID":2,"bucket":"toq-app-media"}
{"time":"2025-09-05T15:31:54.956924091Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.(*S3Adapter).CreateUserFolder","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/create_user_folder.go","line":40},"msg":"placeholder created in S3","userID":2,"path":"2/.placeholder"}
{"time":"2025-09-05T15:31:54.976755801Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.(*S3Adapter).CreateUserFolder","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/create_user_folder.go","line":40},"msg":"placeholder created in S3","userID":2,"path":"2/thumbnails/.placeholder"}
{"time":"2025-09-05T15:31:54.976821222Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/aws_s3.(*S3Adapter).CreateUserFolder","file":"/codigos/go_code/toq_server/internal/adapter/right/aws_s3/create_user_folder.go","line":43},"msg":"user folder structure created successfully in S3","userID":2,"bucket":"toq-app-media"}
{"time":"2025-09-05T15:31:54.986544059Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).SignInWithContext","file":"/codigos/go_code/toq_server/internal/core/service/user_service/signin.go","line":41},"msg":"auth.signin_with_context.debug","national_id":"04679654805","has_device_token":true,"ip":"177.9.64.219","user_agent":"PostmanRuntime/7.45.0","ctx_device_id":""}
{"time":"2025-09-05T15:31:55.128076216Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).signIn","file":"/codigos/go_code/toq_server/internal/core/service/user_service/signin.go","line":166},"msg":"auth.signin.device_token.add_user_only","user_id":2}
{"time":"2025-09-05T15:31:55.132552639Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*securityEventLogger).LogSecurityEvent","file":"/codigos/go_code/toq_server/internal/core/service/user_service/security_logger.go","line":59},"msg":"Security event logged","eventType":"signin_success","result":"success","timestamp":"2025-09-05T15:31:55.132538518Z","userID":2,"nationalID":"04679654805","ipAddress":"177.9.64.219","userAgent":"PostmanRuntime/7.45.0"}
{"time":"2025-09-05T15:31:55.13266929Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).signIn","file":"/codigos/go_code/toq_server/internal/core/service/user_service/signin.go","line":181},"msg":"User signed in successfully","userID":2}
{"time":"2025-09-05T15:31:55.133059727Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*globalService).StartSessionEventSubscriber.func2","file":"/codigos/go_code/toq_server/internal/core/service/global_service/session_notification_subscriber.go","line":32},"msg":"session.event.received","type":"session.created","user_id":2,"session_id":1,"device_id":""}
{"time":"2025-09-05T15:31:55.140889963Z","level":"INFO","msg":"HTTP Request","request_id":"f9d0d97d-44b0-4dc7-8c00-ee2f9b2e52de","method":"POST","path":"/api/v2/auth/owner","status":201,"duration":705598391,"size":640,"client_ip":"177.9.64.219","user_agent":"PostmanRuntime/7.45.0","trace_id":"0df0b5e0837710e245a2e8282a35d086","span_id":"e1850b6506b5ad85"}
{"time":"2025-09-05T15:32:16.652303497Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"a1f48ad6-53f8-44a9-aafa-c98e8215be4c","path":"/api/v2/user/email/resend"}
{"time":"2025-09-05T15:32:16.652998738Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasHTTPPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_http_permission.go","line":26},"msg":"permission.http.check.start","user_id":2,"method":"POST","path":"/api/v2/user/email/resend"}
{"time":"2025-09-05T15:32:16.655664972Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":46},"msg":"permission.check.start","user_id":2,"resource":"http","action":"POST:/api/v2/user/email/resend"}
{"time":"2025-09-05T15:32:16.656243241Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsFromCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":135},"msg":"Cache miss for user permissions","userID":2,"error":"cache miss - user permissions not found for user 2"}
{"time":"2025-09-05T15:32:16.656317282Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":94},"msg":"Cache miss for user permissions","userID":2,"error":"cache miss - cache miss - user permissions not found for user 2"}
{"time":"2025-09-05T15:32:16.660086863Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).SetUserPermissions","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":331},"msg":"User permissions cached","userID":2,"ttl":900000000000,"dataSize":3827}
{"time":"2025-09-05T15:32:16.660415769Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).setUserPermissionsInCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":219},"msg":"User permissions cached successfully","userID":2,"count":25,"dataSize":3827}
{"time":"2025-09-05T15:32:16.660448239Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":112},"msg":"Permissions loaded from database","userID":2,"count":25}
{"time":"2025-09-05T15:32:16.66046729Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":73},"msg":"permission.check.allowed","user_id":2,"resource":"http","action":"POST:/api/v2/user/email/resend","permission_id":40}
{"time":"2025-09-05T15:32:16.66051121Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.PermissionMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/permission_middleware.go","line":71},"msg":"Permission granted","userID":2,"method":"POST","path":"/api/v2/user/email/resend"}
{"time":"2025-09-05T15:32:16.663917105Z","level":"INFO","msg":"HTTP Request","request_id":"a1f48ad6-53f8-44a9-aafa-c98e8215be4c","method":"POST","path":"/api/v2/user/email/resend","status":200,"duration":11547517,"size":42,"client_ip":"177.9.64.219","user_agent":"PostmanRuntime/7.45.0","trace_id":"ce3a94da9d77d3ce6544536350352a86","span_id":"be92fbfbbaa79aea","user_id":2,"user_role_id":2,"role_status":"pending_both"}
{"time":"2025-09-05T15:32:16.663998347Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendNotificationSync","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":118},"msg":"Processando requisi√ß√£o de notifica√ß√£o","type":"email","to":"giulio.alfieri@gmail.com","subject":"TOQ - C√≥digo de altera√ß√£o de email"}
{"time":"2025-09-05T15:32:16.664143479Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendEmail","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":188},"msg":"Enviando notifica√ß√£o por email","to":"giulio.alfieri@gmail.com","subject":"TOQ - C√≥digo de altera√ß√£o de email"}
{"time":"2025-09-05T15:32:16.66418526Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/email.(*EmailAdapter).SendEmail","file":"/codigos/go_code/toq_server/internal/adapter/right/email/send_email.go","line":36},"msg":"Enviando email","attempt":1,"to":"giulio.alfieri@gmail.com","subject":"TOQ - C√≥digo de altera√ß√£o de email"}
{"time":"2025-09-05T15:32:18.475826087Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/email.(*EmailAdapter).SendEmail","file":"/codigos/go_code/toq_server/internal/adapter/right/email/send_email.go","line":44},"msg":"Email enviado com sucesso","to":"giulio.alfieri@gmail.com","subject":"TOQ - C√≥digo de altera√ß√£o de email","attempts":1}
{"time":"2025-09-05T15:32:18.475901298Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendEmail","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":208},"msg":"Email enviado com sucesso","to":"giulio.alfieri@gmail.com","subject":"TOQ - C√≥digo de altera√ß√£o de email"}
{"time":"2025-09-05T15:32:18.637425468Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-05T15:32:18.645772473Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":1,"batch_size":1}
{"time":"2025-09-05T15:32:18.645929605Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-05T15:32:48.637675926Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-05T15:32:48.639208301Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":0,"batch_size":1}
{"time":"2025-09-05T15:32:48.639410194Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-05T15:32:52.038901991Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"50a6914c-2346-453b-982c-f1f257646c79","path":"/api/v2/user/email/confirm"}
{"time":"2025-09-05T15:32:52.039855466Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasHTTPPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_http_permission.go","line":26},"msg":"permission.http.check.start","user_id":2,"method":"POST","path":"/api/v2/user/email/confirm"}
{"time":"2025-09-05T15:32:52.042860034Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":46},"msg":"permission.check.start","user_id":2,"resource":"http","action":"POST:/api/v2/user/email/confirm"}
{"time":"2025-09-05T15:32:52.043300081Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).GetUserPermissions","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":318},"msg":"User permissions cache hit","userID":2,"dataSize":3827}
{"time":"2025-09-05T15:32:52.043906321Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsFromCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":165},"msg":"User permissions cache hit","userID":2,"count":25,"cached_at":"2025-09-05T15:32:16.659510284Z"}
{"time":"2025-09-05T15:32:52.043955582Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":91},"msg":"Permissions loaded from cache","userID":2,"count":25}
{"time":"2025-09-05T15:32:52.043990983Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":73},"msg":"permission.check.allowed","user_id":2,"resource":"http","action":"POST:/api/v2/user/email/confirm","permission_id":39}
{"time":"2025-09-05T15:32:52.044069934Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.PermissionMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/permission_middleware.go","line":71},"msg":"Permission granted","userID":2,"method":"POST","path":"/api/v2/user/email/confirm"}
{"time":"2025-09-05T15:33:00.653168892Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).UpdateUserRoleStatus","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/update_user_role_status_tx.go","line":43},"msg":"Updated user role status (tx)","userID":2,"role":"owner","status":5}
{"time":"2025-09-05T15:33:00.663927136Z","level":"INFO","msg":"HTTP Request","request_id":"50a6914c-2346-453b-982c-f1f257646c79","method":"POST","path":"/api/v2/user/email/confirm","status":200,"duration":8624914594,"size":40,"client_ip":"177.9.64.219","user_agent":"PostmanRuntime/7.45.0","trace_id":"c319a92a7c738254dcaf24733e1bd915","span_id":"52f3493b74fc8e1c","user_id":2,"user_role_id":2,"role_status":"pending_both"}
{"time":"2025-09-05T15:33:10.61840828Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"0583f0c5-8cf8-4c82-bcad-faea5b8d24fa","path":"/api/v2/user/phone/resend"}
{"time":"2025-09-05T15:33:10.618986329Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasHTTPPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_http_permission.go","line":26},"msg":"permission.http.check.start","user_id":2,"method":"POST","path":"/api/v2/user/phone/resend"}
{"time":"2025-09-05T15:33:10.621122283Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":46},"msg":"permission.check.start","user_id":2,"resource":"http","action":"POST:/api/v2/user/phone/resend"}
{"time":"2025-09-05T15:33:10.621464409Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).GetUserPermissions","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":318},"msg":"User permissions cache hit","userID":2,"dataSize":3827}
{"time":"2025-09-05T15:33:10.621920596Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsFromCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":165},"msg":"User permissions cache hit","userID":2,"count":25,"cached_at":"2025-09-05T15:32:16.659510284Z"}
{"time":"2025-09-05T15:33:10.621958037Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":91},"msg":"Permissions loaded from cache","userID":2,"count":25}
{"time":"2025-09-05T15:33:10.621978407Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":73},"msg":"permission.check.allowed","user_id":2,"resource":"http","action":"POST:/api/v2/user/phone/resend","permission_id":43}
{"time":"2025-09-05T15:33:10.622012808Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.PermissionMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/permission_middleware.go","line":71},"msg":"Permission granted","userID":2,"method":"POST","path":"/api/v2/user/phone/resend"}
{"time":"2025-09-05T15:33:10.624924035Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendNotificationSync","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":118},"msg":"Processando requisi√ß√£o de notifica√ß√£o","type":"sms","to":"+5511999141768","subject":""}
{"time":"2025-09-05T15:33:10.625010046Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendSMS","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":216},"msg":"Enviando notifica√ß√£o por SMS","to":"+5511999141768"}
{"time":"2025-09-05T15:33:10.626225226Z","level":"INFO","msg":"HTTP Request","request_id":"0583f0c5-8cf8-4c82-bcad-faea5b8d24fa","method":"POST","path":"/api/v2/user/phone/resend","status":200,"duration":7739734,"size":42,"client_ip":"177.9.64.219","user_agent":"PostmanRuntime/7.45.0","trace_id":"06a63c901c2c25efc2e147735c62d102","span_id":"92f16768350fd008","user_id":2,"user_role_id":2,"role_status":"pending_both"}
Response: {"body":"TOQ - Seu c√≥digo de valida√ß√£o: BFFXK6","num_segments":"1","direction":"outbound-api","from":"+15405155642","to":"+5511999141768","date_updated":"Fri, 05 Sep 2025 15:33:10 +0000","uri":"/2010-04-01/Accounts/ACc8806b43030a5de367d142e99bcf0fa7/Messages/SMcec85db1179631fa7eb98e89036d8424.json","account_sid":"ACc8806b43030a5de367d142e99bcf0fa7","num_media":"0","status":"queued","sid":"SMcec85db1179631fa7eb98e89036d8424","date_created":"Fri, 05 Sep 2025 15:33:10 +0000","price_unit":"USD","api_version":"2010-04-01","subresource_uris":{"media":"/2010-04-01/Accounts/ACc8806b43030a5de367d142e99bcf0fa7/Messages/SMcec85db1179631fa7eb98e89036d8424/Media.json"}}
{"time":"2025-09-05T15:33:10.790363669Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*unifiedNotificationService).sendSMS","file":"/codigos/go_code/toq_server/internal/core/service/global_service/notification_service.go","line":233},"msg":"SMS enviado com sucesso","to":"+5511999141768"}
{"time":"2025-09-05T15:33:18.637683489Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-05T15:33:18.645062278Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":1,"batch_size":1}
{"time":"2025-09-05T15:33:18.645236731Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-05T15:33:40.410671173Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.RequestIDMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/request_id_middleware.go","line":43},"msg":"Request ID generated","request_id":"b1fe31c1-82d3-45db-97d4-6591d0d7386f","path":"/api/v2/user/phone/confirm"}
{"time":"2025-09-05T15:33:40.411466656Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasHTTPPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_http_permission.go","line":26},"msg":"permission.http.check.start","user_id":2,"method":"POST","path":"/api/v2/user/phone/confirm"}
{"time":"2025-09-05T15:33:40.413935546Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":46},"msg":"permission.check.start","user_id":2,"resource":"http","action":"POST:/api/v2/user/phone/confirm"}
{"time":"2025-09-05T15:33:40.414299232Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).GetUserPermissions","file":"/codigos/go_code/toq_server/internal/core/cache/redis_cache.go","line":318},"msg":"User permissions cache hit","userID":2,"dataSize":3827}
{"time":"2025-09-05T15:33:40.414687318Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsFromCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":165},"msg":"User permissions cache hit","userID":2,"count":25,"cached_at":"2025-09-05T15:32:16.659510284Z"}
{"time":"2025-09-05T15:33:40.414715148Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).getUserPermissionsWithCache","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":91},"msg":"Permissions loaded from cache","userID":2,"count":25}
{"time":"2025-09-05T15:33:40.414733389Z","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/permission_service.(*permissionServiceImpl).HasPermission","file":"/codigos/go_code/toq_server/internal/core/service/permission_service/has_permission.go","line":73},"msg":"permission.check.allowed","user_id":2,"resource":"http","action":"POST:/api/v2/user/phone/confirm","permission_id":42}
{"time":"2025-09-05T15:33:40.415370169Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.PermissionMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/permission_middleware.go","line":71},"msg":"Permission granted","userID":2,"method":"POST","path":"/api/v2/user/phone/confirm"}
{"time":"2025-09-05T15:33:52.32442915Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-05T15:33:52.327883206Z","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).applyStatusTransitionAfterContactChange","file":"/codigos/go_code/toq_server/internal/core/service/user_service/user_status_orchestrator.go","line":61},"msg":"user.status_transition.stage_error","stage":"get_validations","err":"sql: no rows in result set"}
{"time":"2025-09-05T15:33:52.327966707Z","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/user_service.(*userService).ConfirmPhoneChange","file":"/codigos/go_code/toq_server/internal/core/service/user_service/confirm_phone_change.go","line":67},"msg":"user.confirm_phone_change.apply_status_transition_error","err":"sql: no rows in result set"}
{"time":"2025-09-05T15:33:52.333026659Z","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/http/middlewares.StructuredLoggingMiddleware.func1","file":"/codigos/go_code/toq_server/internal/adapter/left/http/middlewares/structured_logging_middleware.go","line":172},"msg":"HTTP Error","request_id":"b1fe31c1-82d3-45db-97d4-6591d0d7386f","method":"POST","path":"/api/v2/user/phone/confirm","status":500,"duration":11922265265,"size":73,"client_ip":"177.9.64.219","user_agent":"PostmanRuntime/7.45.0","trace_id":"badfe41c8adf03412679afbabd927774","span_id":"d2259b080b82cbd5","user_id":2,"user_role_id":2,"role_status":"pending_both","errors":["Failed to apply status transition"]}
{"time":"2025-09-05T15:33:52.33680802Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":1,"batch_size":1}
{"time":"2025-09-05T15:33:52.337109415Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
{"time":"2025-09-05T15:34:18.637311655Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-09-05T15:34:18.639140045Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/user.(*UserAdapter).BatchUpdateUserLastActivity","file":"/codigos/go_code/toq_server/internal/adapter/right/mysql/user/batch_update_user_last_activity.go","line":70},"msg":"Batch updated user activities","affected_rows":0,"batch_size":1}
{"time":"2025-09-05T15:34:18.639307587Z","level":"DEBUG","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).processBatch","file":"/codigos/go_code/toq_server/internal/core/go_routines/activity_tracker.go","line":154},"msg":"Successfully updated user activities","count":1}
