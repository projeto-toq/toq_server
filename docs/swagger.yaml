basePath: /api/v2
definitions:
  dto.BaseFeature:
    properties:
      category:
        type: string
      description:
        type: string
      id:
        type: integer
      name:
        type: string
    type: object
  dto.ConfirmPasswordChangeRequest:
    properties:
      code:
        type: string
      nationalID:
        type: string
      newPassword:
        minLength: 6
        type: string
    required:
    - code
    - nationalID
    - newPassword
    type: object
  dto.ConfirmPasswordChangeResponse:
    properties:
      message:
        type: string
    type: object
  dto.ConfirmPhoneChangeRequest:
    properties:
      code:
        type: string
    required:
    - code
    type: object
  dto.ConfirmPhoneChangeResponse:
    properties:
      tokens:
        $ref: '#/definitions/dto.TokensResponse'
    type: object
  dto.CreateAgencyRequest:
    properties:
      agency:
        $ref: '#/definitions/dto.UserCreateRequest'
      deviceToken:
        type: string
    required:
    - agency
    type: object
  dto.CreateAgencyResponse:
    properties:
      tokens:
        $ref: '#/definitions/dto.TokensResponse'
    type: object
  dto.CreateOwnerRequest:
    properties:
      deviceToken:
        type: string
      owner:
        $ref: '#/definitions/dto.UserCreateRequest'
    required:
    - owner
    type: object
  dto.CreateOwnerResponse:
    properties:
      tokens:
        $ref: '#/definitions/dto.TokensResponse'
    type: object
  dto.CreateRealtorRequest:
    properties:
      deviceToken:
        type: string
      realtor:
        $ref: '#/definitions/dto.UserCreateRequest'
    required:
    - realtor
    type: object
  dto.CreateRealtorResponse:
    properties:
      tokens:
        $ref: '#/definitions/dto.TokensResponse'
    type: object
  dto.ErrorResponse:
    properties:
      code:
        type: integer
      details:
        type: object
      message:
        type: string
    type: object
  dto.GetAllListingsResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/dto.ListingResponse'
        type: array
      pagination:
        $ref: '#/definitions/dto.PaginationResponse'
    type: object
  dto.GetBaseFeaturesResponse:
    properties:
      features:
        items:
          $ref: '#/definitions/dto.BaseFeature'
        type: array
    type: object
  dto.GetOptionsResponse:
    properties:
      propertyTypes:
        items:
          $ref: '#/definitions/dto.PropertyTypeOption'
        type: array
      statuses:
        items:
          $ref: '#/definitions/dto.StatusOption'
        type: array
    type: object
  dto.ListingResponse:
    properties:
      complexId:
        type: string
      createdAt:
        type: string
      description:
        type: string
      id:
        type: integer
      number:
        type: string
      price:
        type: number
      propertyType:
        type: integer
      status:
        type: string
      title:
        type: string
      updatedAt:
        type: string
      userId:
        type: integer
      zipCode:
        type: string
    type: object
  dto.PaginationResponse:
    properties:
      limit:
        type: integer
      page:
        type: integer
      total:
        type: integer
      totalPages:
        type: integer
    type: object
  dto.PropertyTypeOption:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  dto.RefreshTokenRequest:
    properties:
      refreshToken:
        type: string
    required:
    - refreshToken
    type: object
  dto.RefreshTokenResponse:
    properties:
      tokens:
        $ref: '#/definitions/dto.TokensResponse'
    type: object
  dto.RequestPasswordChangeRequest:
    properties:
      nationalID:
        type: string
    required:
    - nationalID
    type: object
  dto.RequestPasswordChangeResponse:
    properties:
      message:
        type: string
    type: object
  dto.SignInRequest:
    properties:
      deviceToken:
        example: fcm_device_token
        type: string
      nationalID:
        example: "12345678901"
        type: string
      password:
        example: securePassword123
        type: string
    required:
    - nationalID
    - password
    type: object
  dto.SignInResponse:
    properties:
      tokens:
        $ref: '#/definitions/dto.TokensResponse'
    type: object
  dto.StartListingRequest:
    properties:
      number:
        type: string
      propertyType:
        type: integer
      zipCode:
        type: string
    required:
    - number
    - propertyType
    - zipCode
    type: object
  dto.StartListingResponse:
    properties:
      id:
        type: integer
    type: object
  dto.StatusOption:
    properties:
      id:
        type: string
      name:
        type: string
    type: object
  dto.TokensResponse:
    properties:
      accessToken:
        type: string
      refreshToken:
        type: string
    type: object
  dto.UserCreateRequest:
    properties:
      bornAt:
        description: 'format: 2006-01-02'
        type: string
      city:
        type: string
      complement:
        type: string
      creciNumber:
        type: string
      creciState:
        type: string
      creciValidity:
        description: 'format: 2006-01-02'
        type: string
      email:
        type: string
      fullName:
        maxLength: 100
        minLength: 2
        type: string
      nationalID:
        type: string
      neighborhood:
        type: string
      nickName:
        maxLength: 50
        minLength: 2
        type: string
      number:
        type: string
      password:
        minLength: 6
        type: string
      phoneNumber:
        type: string
      state:
        type: string
      street:
        type: string
      zipCode:
        type: string
    required:
    - bornAt
    - email
    - nationalID
    - nickName
    - password
    - phoneNumber
    - zipCode
    type: object
externalDocs:
  description: OpenAPI
  url: https://swagger.io/resources/open-api/
host: localhost:8080
info:
  contact:
    email: support@toq.com
    name: TOQ Development Team
    url: https://github.com/giulio-alfieri/toq_server
  description: TOQ Server - Real Estate HTTP API Server with hexagonal architecture
  license:
    name: MIT
    url: https://github.com/giulio-alfieri/toq_server/blob/main/LICENSE
  termsOfService: http://swagger.io/terms/
  title: TOQ Server API
  version: "1.0"
paths:
  /auth/agency:
    post:
      consumes:
      - application/json
      description: Create a new agency account with user information
      parameters:
      - description: Agency creation data (include optional deviceToken for push notifications)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.CreateAgencyRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.CreateAgencyResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "409":
          description: User already exists
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "422":
          description: Validation failed
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Create agency account
      tags:
      - Authentication
  /auth/owner:
    post:
      consumes:
      - application/json
      description: Create a new owner account with user information
      parameters:
      - description: Owner creation data (include optional deviceToken for push notifications)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.CreateOwnerRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.CreateOwnerResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "409":
          description: User already exists
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "422":
          description: Validation failed
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Create owner account
      tags:
      - Authentication
  /auth/password/confirm:
    post:
      consumes:
      - application/json
      description: Confirm password change using verification code
      parameters:
      - description: Password change confirmation data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.ConfirmPasswordChangeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.ConfirmPasswordChangeResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Invalid verification code
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "422":
          description: Password validation failed
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Confirm password change
      tags:
      - Authentication
  /auth/password/request:
    post:
      consumes:
      - application/json
      description: Initiate password change process by sending verification code
      parameters:
      - description: Password change request data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.RequestPasswordChangeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.RequestPasswordChangeResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "429":
          description: Too many requests
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Request password change
      tags:
      - Authentication
  /auth/realtor:
    post:
      consumes:
      - application/json
      description: Create a new realtor account with user and CRECI information
      parameters:
      - description: Realtor creation data (include optional deviceToken for push
          notifications)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.CreateRealtorRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.CreateRealtorResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "409":
          description: User already exists
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "422":
          description: Validation failed
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Create realtor account
      tags:
      - Authentication
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Generate new access token using refresh token
      parameters:
      - description: Refresh token data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.RefreshTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.RefreshTokenResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Invalid refresh token
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Refresh access token
      tags:
      - Authentication
  /auth/signin:
    post:
      consumes:
      - application/json
      description: Authenticate user with national ID and password
      parameters:
      - description: Sign in credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SignInRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successful authentication
          schema:
            $ref: '#/definitions/dto.SignInResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Invalid credentials
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: No active user roles
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "423":
          description: Account temporarily locked due to security measures
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "429":
          description: Too many attempts
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: User sign in
      tags:
      - Authentication
  /listings:
    get:
      consumes:
      - application/json
      description: Get all listings with optional filters for status, location, price
        range, etc.
      parameters:
      - description: 'Page number (default: 1)'
        in: query
        minimum: 1
        name: page
        type: integer
      - description: 'Items per page (default: 10)'
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      - description: Filter by listing status
        in: query
        name: status
        type: string
      - description: Filter by user ID
        in: query
        name: userId
        type: string
      - description: Filter by zip code
        in: query
        name: zipCode
        type: string
      - description: Minimum price filter
        in: query
        name: minPrice
        type: integer
      - description: Maximum price filter
        in: query
        name: maxPrice
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GetAllListingsResponse'
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "501":
          description: Service method not implemented
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get all listings with pagination and filters
      tags:
      - Listings
    post:
      consumes:
      - application/json
      description: Create a new listing with basic information (zip code, number,
        property type)
      parameters:
      - description: Listing creation data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.StartListingRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.StartListingResponse'
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Start a new listing
      tags:
      - Listings
  /listings/features/base:
    get:
      consumes:
      - application/json
      description: Get all available base features that can be associated with listings
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GetBaseFeaturesResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get base features
      tags:
      - Listings
  /listings/options:
    get:
      consumes:
      - application/json
      description: Get available property types and statuses for listings based on
        location
      parameters:
      - description: Zip code for location-based options
        in: query
        name: zipCode
        required: true
        type: string
      - description: Property number
        in: query
        name: number
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GetOptionsResponse'
        "400":
          description: Missing required parameters
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get listing options
      tags:
      - Listings
  /user/phone/confirm:
    post:
      consumes:
      - application/json
      description: Confirm a phone number change using the verification code sent
        to the new phone
      parameters:
      - description: Phone change confirmation data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.ConfirmPhoneChangeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.ConfirmPhoneChangeResponse'
        "400":
          description: Invalid request format or code
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Confirm phone number change
      tags:
      - User
  /user/profile:
    get:
      consumes:
      - application/json
      description: Get the current authenticated user's profile information
      produces:
      - application/json
      responses:
        "200":
          description: Profile data with user information
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user profile
      tags:
      - User
  /user/signout:
    post:
      consumes:
      - application/json
      description: Sign out the current user and invalidate their session tokens
      parameters:
      - description: Sign out data
        in: body
        name: request
        required: true
        schema:
          type: object
      - description: Device token to invalidate
        in: body
        name: request.device_token
        schema:
          type: string
      - description: Refresh token to invalidate
        in: body
        name: request.refresh_token
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: Sign out confirmation message
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Invalid request format
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Sign out user
      tags:
      - User
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
