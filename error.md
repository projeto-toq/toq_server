Starting: /home/giulio/go/bin/dlv dap --listen=127.0.0.1:45327 --log-dest=3 from /home/giulio/go-code/toq_server/cmd
DAP server listening at: 127.0.0.1:45327
Type 'dlv help' for list of commands.
LOG.LEVEL setted to INFO
{"time":"2025-08-08T10:04:20.460616907-03:00","level":"INFO","source":{"function":"main.main","file":"/home/giulio/go-code/toq_server/cmd/toq_server.go","line":40},"msg":"TOQ_API initialized with version: ","version":"2.0.0"}
{"time":"2025-08-08T10:04:20.462052745-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeDatabase","file":"/home/giulio/go-code/toq_server/internal/core/config/initialize_database.go","line":35},"msg":"Database answered the ping. MySql connection successfuly!"}
{"time":"2025-08-08T10:04:20.466423675-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeActivityTracker","file":"/home/giulio/go-code/toq_server/internal/core/config/initialize_activity_tracker.go","line":30},"msg":"Activity tracker initialized successfully"}
{"time":"2025-08-08T10:04:20.466522978-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/config.(*config).InitializeGRPC","file":"/home/giulio/go-code/toq_server/internal/core/config/initialize_grpc.go","line":25},"msg":"Server listening on","Addr:":{"IP":"::","Port":50051,"Zone":""}}
{"time":"2025-08-08T10:04:20.468599152-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.NewRedisCache","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":54},"msg":"Redis cache connected successfully","url":"redis://localhost:6379/0"}
{"time":"2025-08-08T10:04:20.473886522-03:00","level":"INFO","source":{"function":"main.main","file":"/home/giulio/go-code/toq_server/cmd/toq_server.go","line":88},"msg":"Server started","serviceQty":4,"methodQty":71}
{"time":"2025-08-08T10:04:20.473885856-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).StartBatchWorker","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":55},"msg":"Activity batch worker started","interval":30000000000}
{"time":"2025-08-08T10:04:20.473957332-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.CleanMemoryCache","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/clean_memory_cache_worker.go","line":14},"msg":"memory cache cleaner routine started"}
{"time":"2025-08-08T10:05:13.424448095-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/grpc/middlewares.TelemetryInterceptor.func1","file":"/home/giulio/go-code/toq_server/internal/adapter/left/grpc/middlewares/telemetry_interceptor.go","line":61},"msg":"Request received:","Method:":"/grpc.UserService/RequestEmailChange"}
{"time":"2025-08-08T10:05:13.430918104-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*notificationService).SendNotification","file":"/home/giulio/go-code/toq_server/internal/core/service/global_service/send_notification.go","line":57},"msg":"Processing notification","notificationType":0,"userID":2,"hasCode":true}
{"time":"2025-08-08T10:05:18.533383095-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*notificationSender).SendEmail","file":"/home/giulio/go-code/toq_server/internal/core/service/global_service/notification_sender.go","line":57},"msg":"Email sent successfully","to":"giulio.alfieri@gmail.com","title":"Confirmação de e-mail da TOQ"}
{"time":"2025-08-08T10:05:18.53353649-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*notificationService).SendNotification","file":"/home/giulio/go-code/toq_server/internal/core/service/global_service/send_notification.go","line":72},"msg":"Notification sent successfully","notificationType":0,"userID":2}
{"time":"2025-08-08T10:05:20.474261141-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:05:20.47543191-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:05:20.47652824-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":121},"msg":"Cache cleaned","deleted_keys":1}
{"time":"2025-08-08T10:05:47.508409184-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/grpc/middlewares.TelemetryInterceptor.func1","file":"/home/giulio/go-code/toq_server/internal/adapter/left/grpc/middlewares/telemetry_interceptor.go","line":61},"msg":"Request received:","Method:":"/grpc.UserService/ConfirmEmailChange"}
{"time":"2025-08-08T10:05:50.474799012-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:06:20.47443645-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:06:20.474879679-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:06:20.475051476-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":121},"msg":"Cache cleaned","deleted_keys":1}
{"time":"2025-08-08T10:06:50.474590662-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:07:20.47467801-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:07:20.475170318-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:07:50.474917635-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:08:20.474460616-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:08:20.475332971-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:08:50.474946764-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:09:20.474481285-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:09:20.475302942-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:09:50.474859709-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:10:20.474760138-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:10:20.475585639-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:10:21.24700604-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/grpc/middlewares.TelemetryInterceptor.func1","file":"/home/giulio/go-code/toq_server/internal/adapter/left/grpc/middlewares/telemetry_interceptor.go","line":61},"msg":"Request received:","Method:":"/grpc.UserService/SignIn"}
{"time":"2025-08-08T10:10:26.992627139-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/grpc/middlewares.TelemetryInterceptor.func1","file":"/home/giulio/go-code/toq_server/internal/adapter/left/grpc/middlewares/telemetry_interceptor.go","line":61},"msg":"Request received:","Method:":"/grpc.UserService/GetProfile"}
{"time":"2025-08-08T10:10:27.389147966-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/grpc/middlewares.TelemetryInterceptor.func1","file":"/home/giulio/go-code/toq_server/internal/adapter/left/grpc/middlewares/telemetry_interceptor.go","line":61},"msg":"Request received:","Method:":"/grpc.UserService/GetOnboardingStatus"}
{"time":"2025-08-08T10:10:40.100644553-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/left/grpc/middlewares.TelemetryInterceptor.func1","file":"/home/giulio/go-code/toq_server/internal/adapter/left/grpc/middlewares/telemetry_interceptor.go","line":61},"msg":"Request received:","Method:":"/grpc.UserService/RequestEmailChange"}
{"time":"2025-08-08T10:10:40.115749638-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*notificationService).SendNotification","file":"/home/giulio/go-code/toq_server/internal/core/service/global_service/send_notification.go","line":57},"msg":"Processing notification","notificationType":0,"userID":2,"hasCode":true}
{"time":"2025-08-08T10:10:44.68284021-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*notificationSender).SendEmail","file":"/home/giulio/go-code/toq_server/internal/core/service/global_service/notification_sender.go","line":57},"msg":"Email sent successfully","to":"giulio.alfieri@gmail.com","title":"Confirmação de e-mail da TOQ"}
{"time":"2025-08-08T10:10:44.682996015-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*notificationService).SendNotification","file":"/home/giulio/go-code/toq_server/internal/core/service/global_service/send_notification.go","line":72},"msg":"Notification sent successfully","notificationType":0,"userID":2}
{"time":"2025-08-08T10:10:44.68323185-03:00","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/global.(*GlobalAdapter).CommitTransaction","file":"/home/giulio/go-code/toq_server/internal/adapter/right/mysql/global/transactions.go","line":49},"msg":"Error committing transaction","error":"sql: transaction has already been committed or rolled back"}
{"time":"2025-08-08T10:10:44.683347889-03:00","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*globalService).CommitTransaction","file":"/home/giulio/go-code/toq_server/internal/core/service/global_service/transactions.go","line":54},"msg":"Error committing transaction","error":"rpc error: code = Internal desc = Internal server error"}
{"time":"2025-08-08T10:10:44.683538326-03:00","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/adapter/right/mysql/global.(*GlobalAdapter).RollbackTransaction","file":"/home/giulio/go-code/toq_server/internal/adapter/right/mysql/global/transactions.go","line":35},"msg":"Error rolling back transaction","error":"sql: transaction has already been committed or rolled back"}
{"time":"2025-08-08T10:10:44.683619474-03:00","level":"ERROR","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/service/global_service.(*globalService).RollbackTransaction","file":"/home/giulio/go-code/toq_server/internal/core/service/global_service/transactions.go","line":38},"msg":"Error rolling back transaction","error":"rpc error: code = Internal desc = Internal server error"}
{"time":"2025-08-08T10:10:50.475640761-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:11:20.474492655-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:11:20.475301544-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:11:20.476333186-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":121},"msg":"Cache cleaned","deleted_keys":4}
{"time":"2025-08-08T10:11:50.475103068-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:12:20.4742925-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:12:20.474929431-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:12:50.475532859-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:13:20.474348443-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:13:20.474962774-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:13:50.474398733-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:14:20.47435537-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:14:20.475502793-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:14:50.475119103-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
{"time":"2025-08-08T10:15:20.474725721-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/cache.(*RedisCache).Clean","file":"/home/giulio/go-code/toq_server/internal/core/cache/redis_cache.go","line":100},"msg":"Cleaning cache","pattern":"toq_cache:*"}
{"time":"2025-08-08T10:15:20.475563079-03:00","level":"INFO","source":{"function":"github.com/giulio-alfieri/toq_server/internal/core/go_routines.(*ActivityTracker).flushActivitiesToDB","file":"/home/giulio/go-code/toq_server/internal/core/go_routines/activity_tracker.go","line":82},"msg":"Processing active users","count":1}
Detaching and terminating target process
dlv dap (119470) exited with code: 0
